{"ast":null,"code":"/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(\"bloodhound\", [\"jquery\"], function (a0) {\n      return root[\"Bloodhound\"] = factory(a0);\n    });\n  } else if (typeof exports === \"object\") {\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    root[\"Bloodhound\"] = factory(jQuery);\n  }\n})(this, function ($) {\n  var _ = function () {\n    \"use strict\";\n\n    return {\n      isMsie: function isMsie() {\n        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n      },\n      isBlankString: function isBlankString(str) {\n        return !str || /^\\s*$/.test(str);\n      },\n      escapeRegExChars: function escapeRegExChars(str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      },\n      isString: function isString(obj) {\n        return typeof obj === \"string\";\n      },\n      isNumber: function isNumber(obj) {\n        return typeof obj === \"number\";\n      },\n      isArray: $.isArray,\n      isFunction: $.isFunction,\n      isObject: $.isPlainObject,\n      isUndefined: function isUndefined(obj) {\n        return typeof obj === \"undefined\";\n      },\n      isElement: function isElement(obj) {\n        return !!(obj && obj.nodeType === 1);\n      },\n      isJQuery: function isJQuery(obj) {\n        return obj instanceof $;\n      },\n      toStr: function toStr(s) {\n        return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n      },\n      bind: $.proxy,\n      each: function each(collection, cb) {\n        $.each(collection, reverseArgs);\n\n        function reverseArgs(index, value) {\n          return cb(value, index);\n        }\n      },\n      map: $.map,\n      filter: $.grep,\n      every: function every(obj, test) {\n        var result = true;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (!(result = test.call(null, val, key, obj))) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      some: function some(obj, test) {\n        var result = false;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (result = test.call(null, val, key, obj)) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      mixin: $.extend,\n      identity: function identity(x) {\n        return x;\n      },\n      clone: function clone(obj) {\n        return $.extend(true, {}, obj);\n      },\n      getIdGenerator: function getIdGenerator() {\n        var counter = 0;\n        return function () {\n          return counter++;\n        };\n      },\n      templatify: function templatify(obj) {\n        return $.isFunction(obj) ? obj : template;\n\n        function template() {\n          return String(obj);\n        }\n      },\n      defer: function defer(fn) {\n        setTimeout(fn, 0);\n      },\n      debounce: function debounce(func, wait, immediate) {\n        var timeout, result;\n        return function () {\n          var context = this,\n              args = arguments,\n              later,\n              callNow;\n\n          later = function later() {\n            timeout = null;\n\n            if (!immediate) {\n              result = func.apply(context, args);\n            }\n          };\n\n          callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n\n          if (callNow) {\n            result = func.apply(context, args);\n          }\n\n          return result;\n        };\n      },\n      throttle: function throttle(func, wait) {\n        var context, args, timeout, result, previous, later;\n        previous = 0;\n\n        later = function later() {\n          previous = new Date();\n          timeout = null;\n          result = func.apply(context, args);\n        };\n\n        return function () {\n          var now = new Date(),\n              remaining = wait - (now - previous);\n          context = this;\n          args = arguments;\n\n          if (remaining <= 0) {\n            clearTimeout(timeout);\n            timeout = null;\n            previous = now;\n            result = func.apply(context, args);\n          } else if (!timeout) {\n            timeout = setTimeout(later, remaining);\n          }\n\n          return result;\n        };\n      },\n      stringify: function stringify(val) {\n        return _.isString(val) ? val : JSON.stringify(val);\n      },\n      noop: function noop() {}\n    };\n  }();\n\n  var VERSION = \"0.11.1\";\n\n  var tokenizers = function () {\n    \"use strict\";\n\n    return {\n      nonword: nonword,\n      whitespace: whitespace,\n      obj: {\n        nonword: getObjTokenizer(nonword),\n        whitespace: getObjTokenizer(whitespace)\n      }\n    };\n\n    function whitespace(str) {\n      str = _.toStr(str);\n      return str ? str.split(/\\s+/) : [];\n    }\n\n    function nonword(str) {\n      str = _.toStr(str);\n      return str ? str.split(/\\W+/) : [];\n    }\n\n    function getObjTokenizer(tokenizer) {\n      return function setKey(keys) {\n        keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n        return function tokenize(o) {\n          var tokens = [];\n\n          _.each(keys, function (k) {\n            tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n          });\n\n          return tokens;\n        };\n      };\n    }\n  }();\n\n  var LruCache = function () {\n    \"use strict\";\n\n    function LruCache(maxSize) {\n      this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n      this.reset();\n\n      if (this.maxSize <= 0) {\n        this.set = this.get = $.noop;\n      }\n    }\n\n    _.mixin(LruCache.prototype, {\n      set: function set(key, val) {\n        var tailItem = this.list.tail,\n            node;\n\n        if (this.size >= this.maxSize) {\n          this.list.remove(tailItem);\n          delete this.hash[tailItem.key];\n          this.size--;\n        }\n\n        if (node = this.hash[key]) {\n          node.val = val;\n          this.list.moveToFront(node);\n        } else {\n          node = new Node(key, val);\n          this.list.add(node);\n          this.hash[key] = node;\n          this.size++;\n        }\n      },\n      get: function get(key) {\n        var node = this.hash[key];\n\n        if (node) {\n          this.list.moveToFront(node);\n          return node.val;\n        }\n      },\n      reset: function reset() {\n        this.size = 0;\n        this.hash = {};\n        this.list = new List();\n      }\n    });\n\n    function List() {\n      this.head = this.tail = null;\n    }\n\n    _.mixin(List.prototype, {\n      add: function add(node) {\n        if (this.head) {\n          node.next = this.head;\n          this.head.prev = node;\n        }\n\n        this.head = node;\n        this.tail = this.tail || node;\n      },\n      remove: function remove(node) {\n        node.prev ? node.prev.next = node.next : this.head = node.next;\n        node.next ? node.next.prev = node.prev : this.tail = node.prev;\n      },\n      moveToFront: function moveToFront(node) {\n        this.remove(node);\n        this.add(node);\n      }\n    });\n\n    function Node(key, val) {\n      this.key = key;\n      this.val = val;\n      this.prev = this.next = null;\n    }\n\n    return LruCache;\n  }();\n\n  var PersistentStorage = function () {\n    \"use strict\";\n\n    var LOCAL_STORAGE;\n\n    try {\n      LOCAL_STORAGE = window.localStorage;\n      LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n      LOCAL_STORAGE.removeItem(\"~~~\");\n    } catch (err) {\n      LOCAL_STORAGE = null;\n    }\n\n    function PersistentStorage(namespace, override) {\n      this.prefix = [\"__\", namespace, \"__\"].join(\"\");\n      this.ttlKey = \"__ttl__\";\n      this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n      this.ls = override || LOCAL_STORAGE;\n      !this.ls && this._noop();\n    }\n\n    _.mixin(PersistentStorage.prototype, {\n      _prefix: function _prefix(key) {\n        return this.prefix + key;\n      },\n      _ttlKey: function _ttlKey(key) {\n        return this._prefix(key) + this.ttlKey;\n      },\n      _noop: function _noop() {\n        this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n      },\n      _safeSet: function _safeSet(key, val) {\n        try {\n          this.ls.setItem(key, val);\n        } catch (err) {\n          if (err.name === \"QuotaExceededError\") {\n            this.clear();\n\n            this._noop();\n          }\n        }\n      },\n      get: function get(key) {\n        if (this.isExpired(key)) {\n          this.remove(key);\n        }\n\n        return decode(this.ls.getItem(this._prefix(key)));\n      },\n      set: function set(key, val, ttl) {\n        if (_.isNumber(ttl)) {\n          this._safeSet(this._ttlKey(key), encode(now() + ttl));\n        } else {\n          this.ls.removeItem(this._ttlKey(key));\n        }\n\n        return this._safeSet(this._prefix(key), encode(val));\n      },\n      remove: function remove(key) {\n        this.ls.removeItem(this._ttlKey(key));\n        this.ls.removeItem(this._prefix(key));\n        return this;\n      },\n      clear: function clear() {\n        var i,\n            keys = gatherMatchingKeys(this.keyMatcher);\n\n        for (i = keys.length; i--;) {\n          this.remove(keys[i]);\n        }\n\n        return this;\n      },\n      isExpired: function isExpired(key) {\n        var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n        return _.isNumber(ttl) && now() > ttl ? true : false;\n      }\n    });\n\n    return PersistentStorage;\n\n    function now() {\n      return new Date().getTime();\n    }\n\n    function encode(val) {\n      return JSON.stringify(_.isUndefined(val) ? null : val);\n    }\n\n    function decode(val) {\n      return $.parseJSON(val);\n    }\n\n    function gatherMatchingKeys(keyMatcher) {\n      var i,\n          key,\n          keys = [],\n          len = LOCAL_STORAGE.length;\n\n      for (i = 0; i < len; i++) {\n        if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n          keys.push(key.replace(keyMatcher, \"\"));\n        }\n      }\n\n      return keys;\n    }\n  }();\n\n  var Transport = function () {\n    \"use strict\";\n\n    var pendingRequestsCount = 0,\n        pendingRequests = {},\n        maxPendingRequests = 6,\n        sharedCache = new LruCache(10);\n\n    function Transport(o) {\n      o = o || {};\n      this.cancelled = false;\n      this.lastReq = null;\n      this._send = o.transport;\n      this._get = o.limiter ? o.limiter(this._get) : this._get;\n      this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n    }\n\n    Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n      maxPendingRequests = num;\n    };\n\n    Transport.resetCache = function resetCache() {\n      sharedCache.reset();\n    };\n\n    _.mixin(Transport.prototype, {\n      _fingerprint: function fingerprint(o) {\n        o = o || {};\n        return o.url + o.type + $.param(o.data || {});\n      },\n      _get: function _get(o, cb) {\n        var that = this,\n            fingerprint,\n            jqXhr;\n        fingerprint = this._fingerprint(o);\n\n        if (this.cancelled || fingerprint !== this.lastReq) {\n          return;\n        }\n\n        if (jqXhr = pendingRequests[fingerprint]) {\n          jqXhr.done(done).fail(fail);\n        } else if (pendingRequestsCount < maxPendingRequests) {\n          pendingRequestsCount++;\n          pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n        } else {\n          this.onDeckRequestArgs = [].slice.call(arguments, 0);\n        }\n\n        function done(resp) {\n          cb(null, resp);\n\n          that._cache.set(fingerprint, resp);\n        }\n\n        function fail() {\n          cb(true);\n        }\n\n        function always() {\n          pendingRequestsCount--;\n          delete pendingRequests[fingerprint];\n\n          if (that.onDeckRequestArgs) {\n            that._get.apply(that, that.onDeckRequestArgs);\n\n            that.onDeckRequestArgs = null;\n          }\n        }\n      },\n      get: function get(o, cb) {\n        var resp, fingerprint;\n        cb = cb || $.noop;\n        o = _.isString(o) ? {\n          url: o\n        } : o || {};\n        fingerprint = this._fingerprint(o);\n        this.cancelled = false;\n        this.lastReq = fingerprint;\n\n        if (resp = this._cache.get(fingerprint)) {\n          cb(null, resp);\n        } else {\n          this._get(o, cb);\n        }\n      },\n      cancel: function cancel() {\n        this.cancelled = true;\n      }\n    });\n\n    return Transport;\n  }();\n\n  var SearchIndex = window.SearchIndex = function () {\n    \"use strict\";\n\n    var CHILDREN = \"c\",\n        IDS = \"i\";\n\n    function SearchIndex(o) {\n      o = o || {};\n\n      if (!o.datumTokenizer || !o.queryTokenizer) {\n        $.error(\"datumTokenizer and queryTokenizer are both required\");\n      }\n\n      this.identify = o.identify || _.stringify;\n      this.datumTokenizer = o.datumTokenizer;\n      this.queryTokenizer = o.queryTokenizer;\n      this.reset();\n    }\n\n    _.mixin(SearchIndex.prototype, {\n      bootstrap: function bootstrap(o) {\n        this.datums = o.datums;\n        this.trie = o.trie;\n      },\n      add: function add(data) {\n        var that = this;\n        data = _.isArray(data) ? data : [data];\n\n        _.each(data, function (datum) {\n          var id, tokens;\n          that.datums[id = that.identify(datum)] = datum;\n          tokens = normalizeTokens(that.datumTokenizer(datum));\n\n          _.each(tokens, function (token) {\n            var node, chars, ch;\n            node = that.trie;\n            chars = token.split(\"\");\n\n            while (ch = chars.shift()) {\n              node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n              node[IDS].push(id);\n            }\n          });\n        });\n      },\n      get: function get(ids) {\n        var that = this;\n        return _.map(ids, function (id) {\n          return that.datums[id];\n        });\n      },\n      search: function search(query) {\n        var that = this,\n            tokens,\n            matches;\n        tokens = normalizeTokens(this.queryTokenizer(query));\n\n        _.each(tokens, function (token) {\n          var node, chars, ch, ids;\n\n          if (matches && matches.length === 0) {\n            return false;\n          }\n\n          node = that.trie;\n          chars = token.split(\"\");\n\n          while (node && (ch = chars.shift())) {\n            node = node[CHILDREN][ch];\n          }\n\n          if (node && chars.length === 0) {\n            ids = node[IDS].slice(0);\n            matches = matches ? getIntersection(matches, ids) : ids;\n          } else {\n            matches = [];\n            return false;\n          }\n        });\n\n        return matches ? _.map(unique(matches), function (id) {\n          return that.datums[id];\n        }) : [];\n      },\n      all: function all() {\n        var values = [];\n\n        for (var key in this.datums) {\n          values.push(this.datums[key]);\n        }\n\n        return values;\n      },\n      reset: function reset() {\n        this.datums = {};\n        this.trie = newNode();\n      },\n      serialize: function serialize() {\n        return {\n          datums: this.datums,\n          trie: this.trie\n        };\n      }\n    });\n\n    return SearchIndex;\n\n    function normalizeTokens(tokens) {\n      tokens = _.filter(tokens, function (token) {\n        return !!token;\n      });\n      tokens = _.map(tokens, function (token) {\n        return token.toLowerCase();\n      });\n      return tokens;\n    }\n\n    function newNode() {\n      var node = {};\n      node[IDS] = [];\n      node[CHILDREN] = {};\n      return node;\n    }\n\n    function unique(array) {\n      var seen = {},\n          uniques = [];\n\n      for (var i = 0, len = array.length; i < len; i++) {\n        if (!seen[array[i]]) {\n          seen[array[i]] = true;\n          uniques.push(array[i]);\n        }\n      }\n\n      return uniques;\n    }\n\n    function getIntersection(arrayA, arrayB) {\n      var ai = 0,\n          bi = 0,\n          intersection = [];\n      arrayA = arrayA.sort();\n      arrayB = arrayB.sort();\n      var lenArrayA = arrayA.length,\n          lenArrayB = arrayB.length;\n\n      while (ai < lenArrayA && bi < lenArrayB) {\n        if (arrayA[ai] < arrayB[bi]) {\n          ai++;\n        } else if (arrayA[ai] > arrayB[bi]) {\n          bi++;\n        } else {\n          intersection.push(arrayA[ai]);\n          ai++;\n          bi++;\n        }\n      }\n\n      return intersection;\n    }\n  }();\n\n  var Prefetch = function () {\n    \"use strict\";\n\n    var keys;\n    keys = {\n      data: \"data\",\n      protocol: \"protocol\",\n      thumbprint: \"thumbprint\"\n    };\n\n    function Prefetch(o) {\n      this.url = o.url;\n      this.ttl = o.ttl;\n      this.cache = o.cache;\n      this.prepare = o.prepare;\n      this.transform = o.transform;\n      this.transport = o.transport;\n      this.thumbprint = o.thumbprint;\n      this.storage = new PersistentStorage(o.cacheKey);\n    }\n\n    _.mixin(Prefetch.prototype, {\n      _settings: function settings() {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      store: function store(data) {\n        if (!this.cache) {\n          return;\n        }\n\n        this.storage.set(keys.data, data, this.ttl);\n        this.storage.set(keys.protocol, location.protocol, this.ttl);\n        this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n      },\n      fromCache: function fromCache() {\n        var stored = {},\n            isExpired;\n\n        if (!this.cache) {\n          return null;\n        }\n\n        stored.data = this.storage.get(keys.data);\n        stored.protocol = this.storage.get(keys.protocol);\n        stored.thumbprint = this.storage.get(keys.thumbprint);\n        isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n        return stored.data && !isExpired ? stored.data : null;\n      },\n      fromNetwork: function fromNetwork(cb) {\n        var that = this,\n            settings;\n\n        if (!cb) {\n          return;\n        }\n\n        settings = this.prepare(this._settings());\n        this.transport(settings).fail(onError).done(onResponse);\n\n        function onError() {\n          cb(true);\n        }\n\n        function onResponse(resp) {\n          cb(null, that.transform(resp));\n        }\n      },\n      clear: function clear() {\n        this.storage.clear();\n        return this;\n      }\n    });\n\n    return Prefetch;\n  }();\n\n  var Remote = function () {\n    \"use strict\";\n\n    function Remote(o) {\n      this.url = o.url;\n      this.prepare = o.prepare;\n      this.transform = o.transform;\n      this.transport = new Transport({\n        cache: o.cache,\n        limiter: o.limiter,\n        transport: o.transport\n      });\n    }\n\n    _.mixin(Remote.prototype, {\n      _settings: function settings() {\n        return {\n          url: this.url,\n          type: \"GET\",\n          dataType: \"json\"\n        };\n      },\n      get: function get(query, cb) {\n        var that = this,\n            settings;\n\n        if (!cb) {\n          return;\n        }\n\n        query = query || \"\";\n        settings = this.prepare(query, this._settings());\n        return this.transport.get(settings, onResponse);\n\n        function onResponse(err, resp) {\n          err ? cb([]) : cb(that.transform(resp));\n        }\n      },\n      cancelLastRequest: function cancelLastRequest() {\n        this.transport.cancel();\n      }\n    });\n\n    return Remote;\n  }();\n\n  var oParser = function () {\n    \"use strict\";\n\n    return function parse(o) {\n      var defaults, sorter;\n      defaults = {\n        initialize: true,\n        identify: _.stringify,\n        datumTokenizer: null,\n        queryTokenizer: null,\n        sufficient: 5,\n        sorter: null,\n        local: [],\n        prefetch: null,\n        remote: null\n      };\n      o = _.mixin(defaults, o || {});\n      !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n      !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n      sorter = o.sorter;\n      o.sorter = sorter ? function (x) {\n        return x.sort(sorter);\n      } : _.identity;\n      o.local = _.isFunction(o.local) ? o.local() : o.local;\n      o.prefetch = parsePrefetch(o.prefetch);\n      o.remote = parseRemote(o.remote);\n      return o;\n    };\n\n    function parsePrefetch(o) {\n      var defaults;\n\n      if (!o) {\n        return null;\n      }\n\n      defaults = {\n        url: null,\n        ttl: 24 * 60 * 60 * 1e3,\n        cache: true,\n        cacheKey: null,\n        thumbprint: \"\",\n        prepare: _.identity,\n        transform: _.identity,\n        transport: null\n      };\n      o = _.isString(o) ? {\n        url: o\n      } : o;\n      o = _.mixin(defaults, o);\n      !o.url && $.error(\"prefetch requires url to be set\");\n      o.transform = o.filter || o.transform;\n      o.cacheKey = o.cacheKey || o.url;\n      o.thumbprint = VERSION + o.thumbprint;\n      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n      return o;\n    }\n\n    function parseRemote(o) {\n      var defaults;\n\n      if (!o) {\n        return;\n      }\n\n      defaults = {\n        url: null,\n        cache: true,\n        prepare: null,\n        replace: null,\n        wildcard: null,\n        limiter: null,\n        rateLimitBy: \"debounce\",\n        rateLimitWait: 300,\n        transform: _.identity,\n        transport: null\n      };\n      o = _.isString(o) ? {\n        url: o\n      } : o;\n      o = _.mixin(defaults, o);\n      !o.url && $.error(\"remote requires url to be set\");\n      o.transform = o.filter || o.transform;\n      o.prepare = toRemotePrepare(o);\n      o.limiter = toLimiter(o);\n      o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n      delete o.replace;\n      delete o.wildcard;\n      delete o.rateLimitBy;\n      delete o.rateLimitWait;\n      return o;\n    }\n\n    function toRemotePrepare(o) {\n      var prepare, replace, wildcard;\n      prepare = o.prepare;\n      replace = o.replace;\n      wildcard = o.wildcard;\n\n      if (prepare) {\n        return prepare;\n      }\n\n      if (replace) {\n        prepare = prepareByReplace;\n      } else if (o.wildcard) {\n        prepare = prepareByWildcard;\n      } else {\n        prepare = idenityPrepare;\n      }\n\n      return prepare;\n\n      function prepareByReplace(query, settings) {\n        settings.url = replace(settings.url, query);\n        return settings;\n      }\n\n      function prepareByWildcard(query, settings) {\n        settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n        return settings;\n      }\n\n      function idenityPrepare(query, settings) {\n        return settings;\n      }\n    }\n\n    function toLimiter(o) {\n      var limiter, method, wait;\n      limiter = o.limiter;\n      method = o.rateLimitBy;\n      wait = o.rateLimitWait;\n\n      if (!limiter) {\n        limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n      }\n\n      return limiter;\n\n      function debounce(wait) {\n        return function debounce(fn) {\n          return _.debounce(fn, wait);\n        };\n      }\n\n      function throttle(wait) {\n        return function throttle(fn) {\n          return _.throttle(fn, wait);\n        };\n      }\n    }\n\n    function callbackToDeferred(fn) {\n      return function wrapper(o) {\n        var deferred = $.Deferred();\n        fn(o, onSuccess, onError);\n        return deferred;\n\n        function onSuccess(resp) {\n          _.defer(function () {\n            deferred.resolve(resp);\n          });\n        }\n\n        function onError(err) {\n          _.defer(function () {\n            deferred.reject(err);\n          });\n        }\n      };\n    }\n  }();\n\n  var Bloodhound = function () {\n    \"use strict\";\n\n    var old;\n    old = window && window.Bloodhound;\n\n    function Bloodhound(o) {\n      o = oParser(o);\n      this.sorter = o.sorter;\n      this.identify = o.identify;\n      this.sufficient = o.sufficient;\n      this.local = o.local;\n      this.remote = o.remote ? new Remote(o.remote) : null;\n      this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n      this.index = new SearchIndex({\n        identify: this.identify,\n        datumTokenizer: o.datumTokenizer,\n        queryTokenizer: o.queryTokenizer\n      });\n      o.initialize !== false && this.initialize();\n    }\n\n    Bloodhound.noConflict = function noConflict() {\n      window && (window.Bloodhound = old);\n      return Bloodhound;\n    };\n\n    Bloodhound.tokenizers = tokenizers;\n\n    _.mixin(Bloodhound.prototype, {\n      __ttAdapter: function ttAdapter() {\n        var that = this;\n        return this.remote ? withAsync : withoutAsync;\n\n        function withAsync(query, sync, async) {\n          return that.search(query, sync, async);\n        }\n\n        function withoutAsync(query, sync) {\n          return that.search(query, sync);\n        }\n      },\n      _loadPrefetch: function loadPrefetch() {\n        var that = this,\n            deferred,\n            serialized;\n        deferred = $.Deferred();\n\n        if (!this.prefetch) {\n          deferred.resolve();\n        } else if (serialized = this.prefetch.fromCache()) {\n          this.index.bootstrap(serialized);\n          deferred.resolve();\n        } else {\n          this.prefetch.fromNetwork(done);\n        }\n\n        return deferred.promise();\n\n        function done(err, data) {\n          if (err) {\n            return deferred.reject();\n          }\n\n          that.add(data);\n          that.prefetch.store(that.index.serialize());\n          deferred.resolve();\n        }\n      },\n      _initialize: function initialize() {\n        var that = this,\n            deferred;\n        this.clear();\n\n        (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n\n        return this.initPromise;\n\n        function addLocalToIndex() {\n          that.add(that.local);\n        }\n      },\n      initialize: function initialize(force) {\n        return !this.initPromise || force ? this._initialize() : this.initPromise;\n      },\n      add: function add(data) {\n        this.index.add(data);\n        return this;\n      },\n      get: function get(ids) {\n        ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n        return this.index.get(ids);\n      },\n      search: function search(query, sync, async) {\n        var that = this,\n            local;\n        local = this.sorter(this.index.search(query));\n        sync(this.remote ? local.slice() : local);\n\n        if (this.remote && local.length < this.sufficient) {\n          this.remote.get(query, processRemote);\n        } else if (this.remote) {\n          this.remote.cancelLastRequest();\n        }\n\n        return this;\n\n        function processRemote(remote) {\n          var nonDuplicates = [];\n\n          _.each(remote, function (r) {\n            !_.some(local, function (l) {\n              return that.identify(r) === that.identify(l);\n            }) && nonDuplicates.push(r);\n          });\n\n          async && async(nonDuplicates);\n        }\n      },\n      all: function all() {\n        return this.index.all();\n      },\n      clear: function clear() {\n        this.index.reset();\n        return this;\n      },\n      clearPrefetchCache: function clearPrefetchCache() {\n        this.prefetch && this.prefetch.clear();\n        return this;\n      },\n      clearRemoteCache: function clearRemoteCache() {\n        Transport.resetCache();\n        return this;\n      },\n      ttAdapter: function ttAdapter() {\n        return this.__ttAdapter();\n      }\n    });\n\n    return Bloodhound;\n  }();\n\n  return Bloodhound;\n});\n\n(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define(\"typeahead.js\", [\"jquery\"], function (a0) {\n      return factory(a0);\n    });\n  } else if (typeof exports === \"object\") {\n    module.exports = factory(require(\"jquery\"));\n  } else {\n    factory(jQuery);\n  }\n})(this, function ($) {\n  var _ = function () {\n    \"use strict\";\n\n    return {\n      isMsie: function isMsie() {\n        return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n      },\n      isBlankString: function isBlankString(str) {\n        return !str || /^\\s*$/.test(str);\n      },\n      escapeRegExChars: function escapeRegExChars(str) {\n        return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n      },\n      isString: function isString(obj) {\n        return typeof obj === \"string\";\n      },\n      isNumber: function isNumber(obj) {\n        return typeof obj === \"number\";\n      },\n      isArray: $.isArray,\n      isFunction: $.isFunction,\n      isObject: $.isPlainObject,\n      isUndefined: function isUndefined(obj) {\n        return typeof obj === \"undefined\";\n      },\n      isElement: function isElement(obj) {\n        return !!(obj && obj.nodeType === 1);\n      },\n      isJQuery: function isJQuery(obj) {\n        return obj instanceof $;\n      },\n      toStr: function toStr(s) {\n        return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n      },\n      bind: $.proxy,\n      each: function each(collection, cb) {\n        $.each(collection, reverseArgs);\n\n        function reverseArgs(index, value) {\n          return cb(value, index);\n        }\n      },\n      map: $.map,\n      filter: $.grep,\n      every: function every(obj, test) {\n        var result = true;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (!(result = test.call(null, val, key, obj))) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      some: function some(obj, test) {\n        var result = false;\n\n        if (!obj) {\n          return result;\n        }\n\n        $.each(obj, function (key, val) {\n          if (result = test.call(null, val, key, obj)) {\n            return false;\n          }\n        });\n        return !!result;\n      },\n      mixin: $.extend,\n      identity: function identity(x) {\n        return x;\n      },\n      clone: function clone(obj) {\n        return $.extend(true, {}, obj);\n      },\n      getIdGenerator: function getIdGenerator() {\n        var counter = 0;\n        return function () {\n          return counter++;\n        };\n      },\n      templatify: function templatify(obj) {\n        return $.isFunction(obj) ? obj : template;\n\n        function template() {\n          return String(obj);\n        }\n      },\n      defer: function defer(fn) {\n        setTimeout(fn, 0);\n      },\n      debounce: function debounce(func, wait, immediate) {\n        var timeout, result;\n        return function () {\n          var context = this,\n              args = arguments,\n              later,\n              callNow;\n\n          later = function later() {\n            timeout = null;\n\n            if (!immediate) {\n              result = func.apply(context, args);\n            }\n          };\n\n          callNow = immediate && !timeout;\n          clearTimeout(timeout);\n          timeout = setTimeout(later, wait);\n\n          if (callNow) {\n            result = func.apply(context, args);\n          }\n\n          return result;\n        };\n      },\n      throttle: function throttle(func, wait) {\n        var context, args, timeout, result, previous, later;\n        previous = 0;\n\n        later = function later() {\n          previous = new Date();\n          timeout = null;\n          result = func.apply(context, args);\n        };\n\n        return function () {\n          var now = new Date(),\n              remaining = wait - (now - previous);\n          context = this;\n          args = arguments;\n\n          if (remaining <= 0) {\n            clearTimeout(timeout);\n            timeout = null;\n            previous = now;\n            result = func.apply(context, args);\n          } else if (!timeout) {\n            timeout = setTimeout(later, remaining);\n          }\n\n          return result;\n        };\n      },\n      stringify: function stringify(val) {\n        return _.isString(val) ? val : JSON.stringify(val);\n      },\n      noop: function noop() {}\n    };\n  }();\n\n  var WWW = function () {\n    \"use strict\";\n\n    var defaultClassNames = {\n      wrapper: \"twitter-typeahead\",\n      input: \"tt-input\",\n      hint: \"tt-hint\",\n      menu: \"tt-menu\",\n      dataset: \"tt-dataset\",\n      suggestion: \"tt-suggestion\",\n      selectable: \"tt-selectable\",\n      empty: \"tt-empty\",\n      open: \"tt-open\",\n      cursor: \"tt-cursor\",\n      highlight: \"tt-highlight\"\n    };\n    return build;\n\n    function build(o) {\n      var www, classes;\n      classes = _.mixin({}, defaultClassNames, o);\n      www = {\n        css: buildCss(),\n        classes: classes,\n        html: buildHtml(classes),\n        selectors: buildSelectors(classes)\n      };\n      return {\n        css: www.css,\n        html: www.html,\n        classes: www.classes,\n        selectors: www.selectors,\n        mixin: function mixin(o) {\n          _.mixin(o, www);\n        }\n      };\n    }\n\n    function buildHtml(c) {\n      return {\n        wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n        menu: '<div class=\"' + c.menu + '\"></div>'\n      };\n    }\n\n    function buildSelectors(classes) {\n      var selectors = {};\n\n      _.each(classes, function (v, k) {\n        selectors[k] = \".\" + v;\n      });\n\n      return selectors;\n    }\n\n    function buildCss() {\n      var css = {\n        wrapper: {\n          position: \"relative\",\n          display: \"inline-block\"\n        },\n        hint: {\n          position: \"absolute\",\n          top: \"0\",\n          left: \"0\",\n          borderColor: \"transparent\",\n          boxShadow: \"none\",\n          opacity: \"1\"\n        },\n        input: {\n          position: \"relative\",\n          verticalAlign: \"top\",\n          backgroundColor: \"transparent\"\n        },\n        inputWithNoHint: {\n          position: \"relative\",\n          verticalAlign: \"top\"\n        },\n        menu: {\n          position: \"absolute\",\n          top: \"100%\",\n          left: \"0\",\n          zIndex: \"100\",\n          display: \"none\"\n        },\n        ltr: {\n          left: \"0\",\n          right: \"auto\"\n        },\n        rtl: {\n          left: \"auto\",\n          right: \" 0\"\n        }\n      };\n\n      if (_.isMsie()) {\n        _.mixin(css.input, {\n          backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n        });\n      }\n\n      return css;\n    }\n  }();\n\n  var EventBus = function () {\n    \"use strict\";\n\n    var namespace, deprecationMap;\n    namespace = \"typeahead:\";\n    deprecationMap = {\n      render: \"rendered\",\n      cursorchange: \"cursorchanged\",\n      select: \"selected\",\n      autocomplete: \"autocompleted\"\n    };\n\n    function EventBus(o) {\n      if (!o || !o.el) {\n        $.error(\"EventBus initialized without el\");\n      }\n\n      this.$el = $(o.el);\n    }\n\n    _.mixin(EventBus.prototype, {\n      _trigger: function _trigger(type, args) {\n        var $e;\n        $e = $.Event(namespace + type);\n        (args = args || []).unshift($e);\n        this.$el.trigger.apply(this.$el, args);\n        return $e;\n      },\n      before: function before(type) {\n        var args, $e;\n        args = [].slice.call(arguments, 1);\n        $e = this._trigger(\"before\" + type, args);\n        return $e.isDefaultPrevented();\n      },\n      trigger: function trigger(type) {\n        var deprecatedType;\n\n        this._trigger(type, [].slice.call(arguments, 1));\n\n        if (deprecatedType = deprecationMap[type]) {\n          this._trigger(deprecatedType, [].slice.call(arguments, 1));\n        }\n      }\n    });\n\n    return EventBus;\n  }();\n\n  var EventEmitter = function () {\n    \"use strict\";\n\n    var splitter = /\\s+/,\n        nextTick = getNextTick();\n    return {\n      onSync: onSync,\n      onAsync: onAsync,\n      off: off,\n      trigger: trigger\n    };\n\n    function on(method, types, cb, context) {\n      var type;\n\n      if (!cb) {\n        return this;\n      }\n\n      types = types.split(splitter);\n      cb = context ? bindContext(cb, context) : cb;\n      this._callbacks = this._callbacks || {};\n\n      while (type = types.shift()) {\n        this._callbacks[type] = this._callbacks[type] || {\n          sync: [],\n          async: []\n        };\n\n        this._callbacks[type][method].push(cb);\n      }\n\n      return this;\n    }\n\n    function onAsync(types, cb, context) {\n      return on.call(this, \"async\", types, cb, context);\n    }\n\n    function onSync(types, cb, context) {\n      return on.call(this, \"sync\", types, cb, context);\n    }\n\n    function off(types) {\n      var type;\n\n      if (!this._callbacks) {\n        return this;\n      }\n\n      types = types.split(splitter);\n\n      while (type = types.shift()) {\n        delete this._callbacks[type];\n      }\n\n      return this;\n    }\n\n    function trigger(types) {\n      var type, callbacks, args, syncFlush, asyncFlush;\n\n      if (!this._callbacks) {\n        return this;\n      }\n\n      types = types.split(splitter);\n      args = [].slice.call(arguments, 1);\n\n      while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n        syncFlush = getFlush(callbacks.sync, this, [type].concat(args));\n        asyncFlush = getFlush(callbacks.async, this, [type].concat(args));\n        syncFlush() && nextTick(asyncFlush);\n      }\n\n      return this;\n    }\n\n    function getFlush(callbacks, context, args) {\n      return flush;\n\n      function flush() {\n        var cancelled;\n\n        for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n          cancelled = callbacks[i].apply(context, args) === false;\n        }\n\n        return !cancelled;\n      }\n    }\n\n    function getNextTick() {\n      var nextTickFn;\n\n      if (window.setImmediate) {\n        nextTickFn = function nextTickSetImmediate(fn) {\n          setImmediate(function () {\n            fn();\n          });\n        };\n      } else {\n        nextTickFn = function nextTickSetTimeout(fn) {\n          setTimeout(function () {\n            fn();\n          }, 0);\n        };\n      }\n\n      return nextTickFn;\n    }\n\n    function bindContext(fn, context) {\n      return fn.bind ? fn.bind(context) : function () {\n        fn.apply(context, [].slice.call(arguments, 0));\n      };\n    }\n  }();\n\n  var highlight = function (doc) {\n    \"use strict\";\n\n    var defaults = {\n      node: null,\n      pattern: null,\n      tagName: \"strong\",\n      className: null,\n      wordsOnly: false,\n      caseSensitive: false\n    };\n    return function hightlight(o) {\n      var regex;\n      o = _.mixin({}, defaults, o);\n\n      if (!o.node || !o.pattern) {\n        return;\n      }\n\n      o.pattern = _.isArray(o.pattern) ? o.pattern : [o.pattern];\n      regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n      traverse(o.node, hightlightTextNode);\n\n      function hightlightTextNode(textNode) {\n        var match, patternNode, wrapperNode;\n\n        if (match = regex.exec(textNode.data)) {\n          wrapperNode = doc.createElement(o.tagName);\n          o.className && (wrapperNode.className = o.className);\n          patternNode = textNode.splitText(match.index);\n          patternNode.splitText(match[0].length);\n          wrapperNode.appendChild(patternNode.cloneNode(true));\n          textNode.parentNode.replaceChild(wrapperNode, patternNode);\n        }\n\n        return !!match;\n      }\n\n      function traverse(el, hightlightTextNode) {\n        var childNode,\n            TEXT_NODE_TYPE = 3;\n\n        for (var i = 0; i < el.childNodes.length; i++) {\n          childNode = el.childNodes[i];\n\n          if (childNode.nodeType === TEXT_NODE_TYPE) {\n            i += hightlightTextNode(childNode) ? 1 : 0;\n          } else {\n            traverse(childNode, hightlightTextNode);\n          }\n        }\n      }\n    };\n\n    function getRegex(patterns, caseSensitive, wordsOnly) {\n      var escapedPatterns = [],\n          regexStr;\n\n      for (var i = 0, len = patterns.length; i < len; i++) {\n        escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n      }\n\n      regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n      return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n    }\n  }(window.document);\n\n  var Input = function () {\n    \"use strict\";\n\n    var specialKeyCodeMap;\n    specialKeyCodeMap = {\n      9: \"tab\",\n      27: \"esc\",\n      37: \"left\",\n      39: \"right\",\n      13: \"enter\",\n      38: \"up\",\n      40: \"down\"\n    };\n\n    function Input(o, www) {\n      o = o || {};\n\n      if (!o.input) {\n        $.error(\"input is missing\");\n      }\n\n      www.mixin(this);\n      this.$hint = $(o.hint);\n      this.$input = $(o.input);\n      this.query = this.$input.val();\n      this.queryWhenFocused = this.hasFocus() ? this.query : null;\n      this.$overflowHelper = buildOverflowHelper(this.$input);\n\n      this._checkLanguageDirection();\n\n      if (this.$hint.length === 0) {\n        this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n      }\n    }\n\n    Input.normalizeQuery = function (str) {\n      return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n    };\n\n    _.mixin(Input.prototype, EventEmitter, {\n      _onBlur: function onBlur() {\n        this.resetInputValue();\n        this.trigger(\"blurred\");\n      },\n      _onFocus: function onFocus() {\n        this.queryWhenFocused = this.query;\n        this.trigger(\"focused\");\n      },\n      _onKeydown: function onKeydown($e) {\n        var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n\n        this._managePreventDefault(keyName, $e);\n\n        if (keyName && this._shouldTrigger(keyName, $e)) {\n          this.trigger(keyName + \"Keyed\", $e);\n        }\n      },\n      _onInput: function onInput() {\n        this._setQuery(this.getInputValue());\n\n        this.clearHintIfInvalid();\n\n        this._checkLanguageDirection();\n      },\n      _managePreventDefault: function managePreventDefault(keyName, $e) {\n        var preventDefault;\n\n        switch (keyName) {\n          case \"up\":\n          case \"down\":\n            preventDefault = !withModifier($e);\n            break;\n\n          default:\n            preventDefault = false;\n        }\n\n        preventDefault && $e.preventDefault();\n      },\n      _shouldTrigger: function shouldTrigger(keyName, $e) {\n        var trigger;\n\n        switch (keyName) {\n          case \"tab\":\n            trigger = !withModifier($e);\n            break;\n\n          default:\n            trigger = true;\n        }\n\n        return trigger;\n      },\n      _checkLanguageDirection: function checkLanguageDirection() {\n        var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n\n        if (this.dir !== dir) {\n          this.dir = dir;\n          this.$hint.attr(\"dir\", dir);\n          this.trigger(\"langDirChanged\", dir);\n        }\n      },\n      _setQuery: function setQuery(val, silent) {\n        var areEquivalent, hasDifferentWhitespace;\n        areEquivalent = areQueriesEquivalent(val, this.query);\n        hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n        this.query = val;\n\n        if (!silent && !areEquivalent) {\n          this.trigger(\"queryChanged\", this.query);\n        } else if (!silent && hasDifferentWhitespace) {\n          this.trigger(\"whitespaceChanged\", this.query);\n        }\n      },\n      bind: function bind() {\n        var that = this,\n            onBlur,\n            onFocus,\n            onKeydown,\n            onInput;\n        onBlur = _.bind(this._onBlur, this);\n        onFocus = _.bind(this._onFocus, this);\n        onKeydown = _.bind(this._onKeydown, this);\n        onInput = _.bind(this._onInput, this);\n        this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n\n        if (!_.isMsie() || _.isMsie() > 9) {\n          this.$input.on(\"input.tt\", onInput);\n        } else {\n          this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function ($e) {\n            if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n              return;\n            }\n\n            _.defer(_.bind(that._onInput, that, $e));\n          });\n        }\n\n        return this;\n      },\n      focus: function focus() {\n        this.$input.focus();\n      },\n      blur: function blur() {\n        this.$input.blur();\n      },\n      getLangDir: function getLangDir() {\n        return this.dir;\n      },\n      getQuery: function getQuery() {\n        return this.query || \"\";\n      },\n      setQuery: function setQuery(val, silent) {\n        this.setInputValue(val);\n\n        this._setQuery(val, silent);\n      },\n      hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n        return this.query !== this.queryWhenFocused;\n      },\n      getInputValue: function getInputValue() {\n        return this.$input.val();\n      },\n      setInputValue: function setInputValue(value) {\n        this.$input.val(value);\n        this.clearHintIfInvalid();\n\n        this._checkLanguageDirection();\n      },\n      resetInputValue: function resetInputValue() {\n        this.setInputValue(this.query);\n      },\n      getHint: function getHint() {\n        return this.$hint.val();\n      },\n      setHint: function setHint(value) {\n        this.$hint.val(value);\n      },\n      clearHint: function clearHint() {\n        this.setHint(\"\");\n      },\n      clearHintIfInvalid: function clearHintIfInvalid() {\n        var val, hint, valIsPrefixOfHint, isValid;\n        val = this.getInputValue();\n        hint = this.getHint();\n        valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n        isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n        !isValid && this.clearHint();\n      },\n      hasFocus: function hasFocus() {\n        return this.$input.is(\":focus\");\n      },\n      hasOverflow: function hasOverflow() {\n        var constraint = this.$input.width() - 2;\n        this.$overflowHelper.text(this.getInputValue());\n        return this.$overflowHelper.width() >= constraint;\n      },\n      isCursorAtEnd: function isCursorAtEnd() {\n        var valueLength, selectionStart, range;\n        valueLength = this.$input.val().length;\n        selectionStart = this.$input[0].selectionStart;\n\n        if (_.isNumber(selectionStart)) {\n          return selectionStart === valueLength;\n        } else if (document.selection) {\n          range = document.selection.createRange();\n          range.moveStart(\"character\", -valueLength);\n          return valueLength === range.text.length;\n        }\n\n        return true;\n      },\n      destroy: function destroy() {\n        this.$hint.off(\".tt\");\n        this.$input.off(\".tt\");\n        this.$overflowHelper.remove();\n        this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n      }\n    });\n\n    return Input;\n\n    function buildOverflowHelper($input) {\n      return $('<pre aria-hidden=\"true\"></pre>').css({\n        position: \"absolute\",\n        visibility: \"hidden\",\n        whiteSpace: \"pre\",\n        fontFamily: $input.css(\"font-family\"),\n        fontSize: $input.css(\"font-size\"),\n        fontStyle: $input.css(\"font-style\"),\n        fontVariant: $input.css(\"font-variant\"),\n        fontWeight: $input.css(\"font-weight\"),\n        wordSpacing: $input.css(\"word-spacing\"),\n        letterSpacing: $input.css(\"letter-spacing\"),\n        textIndent: $input.css(\"text-indent\"),\n        textRendering: $input.css(\"text-rendering\"),\n        textTransform: $input.css(\"text-transform\")\n      }).insertAfter($input);\n    }\n\n    function areQueriesEquivalent(a, b) {\n      return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n    }\n\n    function withModifier($e) {\n      return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n    }\n  }();\n\n  var Dataset = function () {\n    \"use strict\";\n\n    var keys, nameGenerator;\n    keys = {\n      val: \"tt-selectable-display\",\n      obj: \"tt-selectable-object\"\n    };\n    nameGenerator = _.getIdGenerator();\n\n    function Dataset(o, www) {\n      o = o || {};\n      o.templates = o.templates || {};\n      o.templates.notFound = o.templates.notFound || o.templates.empty;\n\n      if (!o.source) {\n        $.error(\"missing source\");\n      }\n\n      if (!o.node) {\n        $.error(\"missing node\");\n      }\n\n      if (o.name && !isValidName(o.name)) {\n        $.error(\"invalid dataset name: \" + o.name);\n      }\n\n      www.mixin(this);\n      this.highlight = !!o.highlight;\n      this.name = o.name || nameGenerator();\n      this.limit = o.limit || 5;\n      this.displayFn = getDisplayFn(o.display || o.displayKey);\n      this.templates = getTemplates(o.templates, this.displayFn);\n      this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n      this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n\n      this._resetLastSuggestion();\n\n      this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n    }\n\n    Dataset.extractData = function extractData(el) {\n      var $el = $(el);\n\n      if ($el.data(keys.obj)) {\n        return {\n          val: $el.data(keys.val) || \"\",\n          obj: $el.data(keys.obj) || null\n        };\n      }\n\n      return null;\n    };\n\n    _.mixin(Dataset.prototype, EventEmitter, {\n      _overwrite: function overwrite(query, suggestions) {\n        suggestions = suggestions || [];\n\n        if (suggestions.length) {\n          this._renderSuggestions(query, suggestions);\n        } else if (this.async && this.templates.pending) {\n          this._renderPending(query);\n        } else if (!this.async && this.templates.notFound) {\n          this._renderNotFound(query);\n        } else {\n          this._empty();\n        }\n\n        this.trigger(\"rendered\", this.name, suggestions, false);\n      },\n      _append: function append(query, suggestions) {\n        suggestions = suggestions || [];\n\n        if (suggestions.length && this.$lastSuggestion.length) {\n          this._appendSuggestions(query, suggestions);\n        } else if (suggestions.length) {\n          this._renderSuggestions(query, suggestions);\n        } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n          this._renderNotFound(query);\n        }\n\n        this.trigger(\"rendered\", this.name, suggestions, true);\n      },\n      _renderSuggestions: function renderSuggestions(query, suggestions) {\n        var $fragment;\n        $fragment = this._getSuggestionsFragment(query, suggestions);\n        this.$lastSuggestion = $fragment.children().last();\n        this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n      },\n      _appendSuggestions: function appendSuggestions(query, suggestions) {\n        var $fragment, $lastSuggestion;\n        $fragment = this._getSuggestionsFragment(query, suggestions);\n        $lastSuggestion = $fragment.children().last();\n        this.$lastSuggestion.after($fragment);\n        this.$lastSuggestion = $lastSuggestion;\n      },\n      _renderPending: function renderPending(query) {\n        var template = this.templates.pending;\n\n        this._resetLastSuggestion();\n\n        template && this.$el.html(template({\n          query: query,\n          dataset: this.name\n        }));\n      },\n      _renderNotFound: function renderNotFound(query) {\n        var template = this.templates.notFound;\n\n        this._resetLastSuggestion();\n\n        template && this.$el.html(template({\n          query: query,\n          dataset: this.name\n        }));\n      },\n      _empty: function empty() {\n        this.$el.empty();\n\n        this._resetLastSuggestion();\n      },\n      _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n        var that = this,\n            fragment;\n        fragment = document.createDocumentFragment();\n\n        _.each(suggestions, function getSuggestionNode(suggestion) {\n          var $el, context;\n          context = that._injectQuery(query, suggestion);\n          $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n          fragment.appendChild($el[0]);\n        });\n\n        this.highlight && highlight({\n          className: this.classes.highlight,\n          node: fragment,\n          pattern: query\n        });\n        return $(fragment);\n      },\n      _getFooter: function getFooter(query, suggestions) {\n        return this.templates.footer ? this.templates.footer({\n          query: query,\n          suggestions: suggestions,\n          dataset: this.name\n        }) : null;\n      },\n      _getHeader: function getHeader(query, suggestions) {\n        return this.templates.header ? this.templates.header({\n          query: query,\n          suggestions: suggestions,\n          dataset: this.name\n        }) : null;\n      },\n      _resetLastSuggestion: function resetLastSuggestion() {\n        this.$lastSuggestion = $();\n      },\n      _injectQuery: function injectQuery(query, obj) {\n        return _.isObject(obj) ? _.mixin({\n          _query: query\n        }, obj) : obj;\n      },\n      update: function update(query) {\n        var that = this,\n            canceled = false,\n            syncCalled = false,\n            rendered = 0;\n        this.cancel();\n\n        this.cancel = function cancel() {\n          canceled = true;\n          that.cancel = $.noop;\n          that.async && that.trigger(\"asyncCanceled\", query);\n        };\n\n        this.source(query, sync, async);\n        !syncCalled && sync([]);\n\n        function sync(suggestions) {\n          if (syncCalled) {\n            return;\n          }\n\n          syncCalled = true;\n          suggestions = (suggestions || []).slice(0, that.limit);\n          rendered = suggestions.length;\n\n          that._overwrite(query, suggestions);\n\n          if (rendered < that.limit && that.async) {\n            that.trigger(\"asyncRequested\", query);\n          }\n        }\n\n        function async(suggestions) {\n          suggestions = suggestions || [];\n\n          if (!canceled && rendered < that.limit) {\n            that.cancel = $.noop;\n            rendered += suggestions.length;\n\n            that._append(query, suggestions.slice(0, that.limit - rendered));\n\n            that.async && that.trigger(\"asyncReceived\", query);\n          }\n        }\n      },\n      cancel: $.noop,\n      clear: function clear() {\n        this._empty();\n\n        this.cancel();\n        this.trigger(\"cleared\");\n      },\n      isEmpty: function isEmpty() {\n        return this.$el.is(\":empty\");\n      },\n      destroy: function destroy() {\n        this.$el = $(\"<div>\");\n      }\n    });\n\n    return Dataset;\n\n    function getDisplayFn(display) {\n      display = display || _.stringify;\n      return _.isFunction(display) ? display : displayFn;\n\n      function displayFn(obj) {\n        return obj[display];\n      }\n    }\n\n    function getTemplates(templates, displayFn) {\n      return {\n        notFound: templates.notFound && _.templatify(templates.notFound),\n        pending: templates.pending && _.templatify(templates.pending),\n        header: templates.header && _.templatify(templates.header),\n        footer: templates.footer && _.templatify(templates.footer),\n        suggestion: templates.suggestion || suggestionTemplate\n      };\n\n      function suggestionTemplate(context) {\n        return $(\"<div>\").text(displayFn(context));\n      }\n    }\n\n    function isValidName(str) {\n      return /^[_a-zA-Z0-9-]+$/.test(str);\n    }\n  }();\n\n  var Menu = function () {\n    \"use strict\";\n\n    function Menu(o, www) {\n      var that = this;\n      o = o || {};\n\n      if (!o.node) {\n        $.error(\"node is required\");\n      }\n\n      www.mixin(this);\n      this.$node = $(o.node);\n      this.query = null;\n      this.datasets = _.map(o.datasets, initializeDataset);\n\n      function initializeDataset(oDataset) {\n        var node = that.$node.find(oDataset.node).first();\n        oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n        return new Dataset(oDataset, www);\n      }\n    }\n\n    _.mixin(Menu.prototype, EventEmitter, {\n      _onSelectableClick: function onSelectableClick($e) {\n        this.trigger(\"selectableClicked\", $($e.currentTarget));\n      },\n      _onRendered: function onRendered(type, dataset, suggestions, async) {\n        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n        this.trigger(\"datasetRendered\", dataset, suggestions, async);\n      },\n      _onCleared: function onCleared() {\n        this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n        this.trigger(\"datasetCleared\");\n      },\n      _propagate: function propagate() {\n        this.trigger.apply(this, arguments);\n      },\n      _allDatasetsEmpty: function allDatasetsEmpty() {\n        return _.every(this.datasets, isDatasetEmpty);\n\n        function isDatasetEmpty(dataset) {\n          return dataset.isEmpty();\n        }\n      },\n      _getSelectables: function getSelectables() {\n        return this.$node.find(this.selectors.selectable);\n      },\n      _removeCursor: function _removeCursor() {\n        var $selectable = this.getActiveSelectable();\n        $selectable && $selectable.removeClass(this.classes.cursor);\n      },\n      _ensureVisible: function ensureVisible($el) {\n        var elTop, elBottom, nodeScrollTop, nodeHeight;\n        elTop = $el.position().top;\n        elBottom = elTop + $el.outerHeight(true);\n        nodeScrollTop = this.$node.scrollTop();\n        nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n\n        if (elTop < 0) {\n          this.$node.scrollTop(nodeScrollTop + elTop);\n        } else if (nodeHeight < elBottom) {\n          this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n        }\n      },\n      bind: function bind() {\n        var that = this,\n            onSelectableClick;\n        onSelectableClick = _.bind(this._onSelectableClick, this);\n        this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n\n        _.each(this.datasets, function (dataset) {\n          dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n        });\n\n        return this;\n      },\n      isOpen: function isOpen() {\n        return this.$node.hasClass(this.classes.open);\n      },\n      open: function open() {\n        this.$node.addClass(this.classes.open);\n      },\n      close: function close() {\n        this.$node.removeClass(this.classes.open);\n\n        this._removeCursor();\n      },\n      setLanguageDirection: function setLanguageDirection(dir) {\n        this.$node.attr(\"dir\", dir);\n      },\n      selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n        var $selectables, $oldCursor, oldIndex, newIndex;\n        $oldCursor = this.getActiveSelectable();\n        $selectables = this._getSelectables();\n        oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n        newIndex = oldIndex + delta;\n        newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n        newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n        return newIndex === -1 ? null : $selectables.eq(newIndex);\n      },\n      setCursor: function setCursor($selectable) {\n        this._removeCursor();\n\n        if ($selectable = $selectable && $selectable.first()) {\n          $selectable.addClass(this.classes.cursor);\n\n          this._ensureVisible($selectable);\n        }\n      },\n      getSelectableData: function getSelectableData($el) {\n        return $el && $el.length ? Dataset.extractData($el) : null;\n      },\n      getActiveSelectable: function getActiveSelectable() {\n        var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n\n        return $selectable.length ? $selectable : null;\n      },\n      getTopSelectable: function getTopSelectable() {\n        var $selectable = this._getSelectables().first();\n\n        return $selectable.length ? $selectable : null;\n      },\n      update: function update(query) {\n        var isValidUpdate = query !== this.query;\n\n        if (isValidUpdate) {\n          this.query = query;\n\n          _.each(this.datasets, updateDataset);\n        }\n\n        return isValidUpdate;\n\n        function updateDataset(dataset) {\n          dataset.update(query);\n        }\n      },\n      empty: function empty() {\n        _.each(this.datasets, clearDataset);\n\n        this.query = null;\n        this.$node.addClass(this.classes.empty);\n\n        function clearDataset(dataset) {\n          dataset.clear();\n        }\n      },\n      destroy: function destroy() {\n        this.$node.off(\".tt\");\n        this.$node = $(\"<div>\");\n\n        _.each(this.datasets, destroyDataset);\n\n        function destroyDataset(dataset) {\n          dataset.destroy();\n        }\n      }\n    });\n\n    return Menu;\n  }();\n\n  var DefaultMenu = function () {\n    \"use strict\";\n\n    var s = Menu.prototype;\n\n    function DefaultMenu() {\n      Menu.apply(this, [].slice.call(arguments, 0));\n    }\n\n    _.mixin(DefaultMenu.prototype, Menu.prototype, {\n      open: function open() {\n        !this._allDatasetsEmpty() && this._show();\n        return s.open.apply(this, [].slice.call(arguments, 0));\n      },\n      close: function close() {\n        this._hide();\n\n        return s.close.apply(this, [].slice.call(arguments, 0));\n      },\n      _onRendered: function onRendered() {\n        if (this._allDatasetsEmpty()) {\n          this._hide();\n        } else {\n          this.isOpen() && this._show();\n        }\n\n        return s._onRendered.apply(this, [].slice.call(arguments, 0));\n      },\n      _onCleared: function onCleared() {\n        if (this._allDatasetsEmpty()) {\n          this._hide();\n        } else {\n          this.isOpen() && this._show();\n        }\n\n        return s._onCleared.apply(this, [].slice.call(arguments, 0));\n      },\n      setLanguageDirection: function setLanguageDirection(dir) {\n        this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n        return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n      },\n      _hide: function hide() {\n        this.$node.hide();\n      },\n      _show: function show() {\n        this.$node.css(\"display\", \"block\");\n      }\n    });\n\n    return DefaultMenu;\n  }();\n\n  var Typeahead = function () {\n    \"use strict\";\n\n    function Typeahead(o, www) {\n      var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n      o = o || {};\n\n      if (!o.input) {\n        $.error(\"missing input\");\n      }\n\n      if (!o.menu) {\n        $.error(\"missing menu\");\n      }\n\n      if (!o.eventBus) {\n        $.error(\"missing event bus\");\n      }\n\n      www.mixin(this);\n      this.eventBus = o.eventBus;\n      this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n      this.input = o.input;\n      this.menu = o.menu;\n      this.enabled = true;\n      this.active = false;\n      this.input.hasFocus() && this.activate();\n      this.dir = this.input.getLangDir();\n\n      this._hacks();\n\n      this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n      onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n      onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n      onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n      onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n      onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n      onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n      onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n      onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n      onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n      onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n      onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n      this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n    }\n\n    _.mixin(Typeahead.prototype, {\n      _hacks: function hacks() {\n        var $input, $menu;\n        $input = this.input.$input || $(\"<div>\");\n        $menu = this.menu.$node || $(\"<div>\");\n        $input.on(\"blur.tt\", function ($e) {\n          var active, isActive, hasActive;\n          active = document.activeElement;\n          isActive = $menu.is(active);\n          hasActive = $menu.has(active).length > 0;\n\n          if (_.isMsie() && (isActive || hasActive)) {\n            $e.preventDefault();\n            $e.stopImmediatePropagation();\n\n            _.defer(function () {\n              $input.focus();\n            });\n          }\n        });\n        $menu.on(\"mousedown.tt\", function ($e) {\n          $e.preventDefault();\n        });\n      },\n      _onSelectableClicked: function onSelectableClicked(type, $el) {\n        this.select($el);\n      },\n      _onDatasetCleared: function onDatasetCleared() {\n        this._updateHint();\n      },\n      _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n        this._updateHint();\n\n        this.eventBus.trigger(\"render\", suggestions, async, dataset);\n      },\n      _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n        this.eventBus.trigger(\"asyncrequest\", query, dataset);\n      },\n      _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n        this.eventBus.trigger(\"asynccancel\", query, dataset);\n      },\n      _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n        this.eventBus.trigger(\"asyncreceive\", query, dataset);\n      },\n      _onFocused: function onFocused() {\n        this._minLengthMet() && this.menu.update(this.input.getQuery());\n      },\n      _onBlurred: function onBlurred() {\n        if (this.input.hasQueryChangedSinceLastFocus()) {\n          this.eventBus.trigger(\"change\", this.input.getQuery());\n        }\n      },\n      _onEnterKeyed: function onEnterKeyed(type, $e) {\n        var $selectable;\n\n        if ($selectable = this.menu.getActiveSelectable()) {\n          this.select($selectable) && $e.preventDefault();\n        }\n      },\n      _onTabKeyed: function onTabKeyed(type, $e) {\n        var $selectable;\n\n        if ($selectable = this.menu.getActiveSelectable()) {\n          this.select($selectable) && $e.preventDefault();\n        } else if ($selectable = this.menu.getTopSelectable()) {\n          this.autocomplete($selectable) && $e.preventDefault();\n        }\n      },\n      _onEscKeyed: function onEscKeyed() {\n        this.close();\n      },\n      _onUpKeyed: function onUpKeyed() {\n        this.moveCursor(-1);\n      },\n      _onDownKeyed: function onDownKeyed() {\n        this.moveCursor(+1);\n      },\n      _onLeftKeyed: function onLeftKeyed() {\n        if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n          this.autocomplete(this.menu.getTopSelectable());\n        }\n      },\n      _onRightKeyed: function onRightKeyed() {\n        if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n          this.autocomplete(this.menu.getTopSelectable());\n        }\n      },\n      _onQueryChanged: function onQueryChanged(e, query) {\n        this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n      },\n      _onWhitespaceChanged: function onWhitespaceChanged() {\n        this._updateHint();\n      },\n      _onLangDirChanged: function onLangDirChanged(e, dir) {\n        if (this.dir !== dir) {\n          this.dir = dir;\n          this.menu.setLanguageDirection(dir);\n        }\n      },\n      _openIfActive: function openIfActive() {\n        this.isActive() && this.open();\n      },\n      _minLengthMet: function minLengthMet(query) {\n        query = _.isString(query) ? query : this.input.getQuery() || \"\";\n        return query.length >= this.minLength;\n      },\n      _updateHint: function updateHint() {\n        var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n        $selectable = this.menu.getTopSelectable();\n        data = this.menu.getSelectableData($selectable);\n        val = this.input.getInputValue();\n\n        if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n          query = Input.normalizeQuery(val);\n          escapedQuery = _.escapeRegExChars(query);\n          frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n          match = frontMatchRegEx.exec(data.val);\n          match && this.input.setHint(val + match[1]);\n        } else {\n          this.input.clearHint();\n        }\n      },\n      isEnabled: function isEnabled() {\n        return this.enabled;\n      },\n      enable: function enable() {\n        this.enabled = true;\n      },\n      disable: function disable() {\n        this.enabled = false;\n      },\n      isActive: function isActive() {\n        return this.active;\n      },\n      activate: function activate() {\n        if (this.isActive()) {\n          return true;\n        } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n          return false;\n        } else {\n          this.active = true;\n          this.eventBus.trigger(\"active\");\n          return true;\n        }\n      },\n      deactivate: function deactivate() {\n        if (!this.isActive()) {\n          return true;\n        } else if (this.eventBus.before(\"idle\")) {\n          return false;\n        } else {\n          this.active = false;\n          this.close();\n          this.eventBus.trigger(\"idle\");\n          return true;\n        }\n      },\n      isOpen: function isOpen() {\n        return this.menu.isOpen();\n      },\n      open: function open() {\n        if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n          this.menu.open();\n\n          this._updateHint();\n\n          this.eventBus.trigger(\"open\");\n        }\n\n        return this.isOpen();\n      },\n      close: function close() {\n        if (this.isOpen() && !this.eventBus.before(\"close\")) {\n          this.menu.close();\n          this.input.clearHint();\n          this.input.resetInputValue();\n          this.eventBus.trigger(\"close\");\n        }\n\n        return !this.isOpen();\n      },\n      setVal: function setVal(val) {\n        this.input.setQuery(_.toStr(val));\n      },\n      getVal: function getVal() {\n        return this.input.getQuery();\n      },\n      select: function select($selectable) {\n        var data = this.menu.getSelectableData($selectable);\n\n        if (data && !this.eventBus.before(\"select\", data.obj)) {\n          this.input.setQuery(data.val, true);\n          this.eventBus.trigger(\"select\", data.obj);\n          this.close();\n          return true;\n        }\n\n        return false;\n      },\n      autocomplete: function autocomplete($selectable) {\n        var query, data, isValid;\n        query = this.input.getQuery();\n        data = this.menu.getSelectableData($selectable);\n        isValid = data && query !== data.val;\n\n        if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n          this.input.setQuery(data.val);\n          this.eventBus.trigger(\"autocomplete\", data.obj);\n          return true;\n        }\n\n        return false;\n      },\n      moveCursor: function moveCursor(delta) {\n        var query, $candidate, data, payload, cancelMove;\n        query = this.input.getQuery();\n        $candidate = this.menu.selectableRelativeToCursor(delta);\n        data = this.menu.getSelectableData($candidate);\n        payload = data ? data.obj : null;\n        cancelMove = this._minLengthMet() && this.menu.update(query);\n\n        if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n          this.menu.setCursor($candidate);\n\n          if (data) {\n            this.input.setInputValue(data.val);\n          } else {\n            this.input.resetInputValue();\n\n            this._updateHint();\n          }\n\n          this.eventBus.trigger(\"cursorchange\", payload);\n          return true;\n        }\n\n        return false;\n      },\n      destroy: function destroy() {\n        this.input.destroy();\n        this.menu.destroy();\n      }\n    });\n\n    return Typeahead;\n\n    function c(ctx) {\n      var methods = [].slice.call(arguments, 1);\n      return function () {\n        var args = [].slice.call(arguments);\n\n        _.each(methods, function (method) {\n          return ctx[method].apply(ctx, args);\n        });\n      };\n    }\n  }();\n\n  (function () {\n    \"use strict\";\n\n    var old, keys, methods;\n    old = $.fn.typeahead;\n    keys = {\n      www: \"tt-www\",\n      attrs: \"tt-attrs\",\n      typeahead: \"tt-typeahead\"\n    };\n    methods = {\n      initialize: function initialize(o, datasets) {\n        var www;\n        datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n        o = o || {};\n        www = WWW(o.classNames);\n        return this.each(attach);\n\n        function attach() {\n          var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n\n          _.each(datasets, function (d) {\n            d.highlight = !!o.highlight;\n          });\n\n          $input = $(this);\n          $wrapper = $(www.html.wrapper);\n          $hint = $elOrNull(o.hint);\n          $menu = $elOrNull(o.menu);\n          defaultHint = o.hint !== false && !$hint;\n          defaultMenu = o.menu !== false && !$menu;\n          defaultHint && ($hint = buildHintFromInput($input, www));\n          defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n          $hint && $hint.val(\"\");\n          $input = prepInput($input, www);\n\n          if (defaultHint || defaultMenu) {\n            $wrapper.css(www.css.wrapper);\n            $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n            $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n          }\n\n          MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n          eventBus = new EventBus({\n            el: $input\n          });\n          input = new Input({\n            hint: $hint,\n            input: $input\n          }, www);\n          menu = new MenuConstructor({\n            node: $menu,\n            datasets: datasets\n          }, www);\n          typeahead = new Typeahead({\n            input: input,\n            menu: menu,\n            eventBus: eventBus,\n            minLength: o.minLength\n          }, www);\n          $input.data(keys.www, www);\n          $input.data(keys.typeahead, typeahead);\n        }\n      },\n      isEnabled: function isEnabled() {\n        var enabled;\n        ttEach(this.first(), function (t) {\n          enabled = t.isEnabled();\n        });\n        return enabled;\n      },\n      enable: function enable() {\n        ttEach(this, function (t) {\n          t.enable();\n        });\n        return this;\n      },\n      disable: function disable() {\n        ttEach(this, function (t) {\n          t.disable();\n        });\n        return this;\n      },\n      isActive: function isActive() {\n        var active;\n        ttEach(this.first(), function (t) {\n          active = t.isActive();\n        });\n        return active;\n      },\n      activate: function activate() {\n        ttEach(this, function (t) {\n          t.activate();\n        });\n        return this;\n      },\n      deactivate: function deactivate() {\n        ttEach(this, function (t) {\n          t.deactivate();\n        });\n        return this;\n      },\n      isOpen: function isOpen() {\n        var open;\n        ttEach(this.first(), function (t) {\n          open = t.isOpen();\n        });\n        return open;\n      },\n      open: function open() {\n        ttEach(this, function (t) {\n          t.open();\n        });\n        return this;\n      },\n      close: function close() {\n        ttEach(this, function (t) {\n          t.close();\n        });\n        return this;\n      },\n      select: function select(el) {\n        var success = false,\n            $el = $(el);\n        ttEach(this.first(), function (t) {\n          success = t.select($el);\n        });\n        return success;\n      },\n      autocomplete: function autocomplete(el) {\n        var success = false,\n            $el = $(el);\n        ttEach(this.first(), function (t) {\n          success = t.autocomplete($el);\n        });\n        return success;\n      },\n      moveCursor: function moveCursoe(delta) {\n        var success = false;\n        ttEach(this.first(), function (t) {\n          success = t.moveCursor(delta);\n        });\n        return success;\n      },\n      val: function val(newVal) {\n        var query;\n\n        if (!arguments.length) {\n          ttEach(this.first(), function (t) {\n            query = t.getVal();\n          });\n          return query;\n        } else {\n          ttEach(this, function (t) {\n            t.setVal(newVal);\n          });\n          return this;\n        }\n      },\n      destroy: function destroy() {\n        ttEach(this, function (typeahead, $input) {\n          revert($input);\n          typeahead.destroy();\n        });\n        return this;\n      }\n    };\n\n    $.fn.typeahead = function (method) {\n      if (methods[method]) {\n        return methods[method].apply(this, [].slice.call(arguments, 1));\n      } else {\n        return methods.initialize.apply(this, arguments);\n      }\n    };\n\n    $.fn.typeahead.noConflict = function noConflict() {\n      $.fn.typeahead = old;\n      return this;\n    };\n\n    function ttEach($els, fn) {\n      $els.each(function () {\n        var $input = $(this),\n            typeahead;\n        (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n      });\n    }\n\n    function buildHintFromInput($input, www) {\n      return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n        autocomplete: \"off\",\n        spellcheck: \"false\",\n        tabindex: -1\n      });\n    }\n\n    function prepInput($input, www) {\n      $input.data(keys.attrs, {\n        dir: $input.attr(\"dir\"),\n        autocomplete: $input.attr(\"autocomplete\"),\n        spellcheck: $input.attr(\"spellcheck\"),\n        style: $input.attr(\"style\")\n      });\n      $input.addClass(www.classes.input).attr({\n        autocomplete: \"off\",\n        spellcheck: false\n      });\n\n      try {\n        !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n      } catch (e) {}\n\n      return $input;\n    }\n\n    function getBackgroundStyles($el) {\n      return {\n        backgroundAttachment: $el.css(\"background-attachment\"),\n        backgroundClip: $el.css(\"background-clip\"),\n        backgroundColor: $el.css(\"background-color\"),\n        backgroundImage: $el.css(\"background-image\"),\n        backgroundOrigin: $el.css(\"background-origin\"),\n        backgroundPosition: $el.css(\"background-position\"),\n        backgroundRepeat: $el.css(\"background-repeat\"),\n        backgroundSize: $el.css(\"background-size\")\n      };\n    }\n\n    function revert($input) {\n      var www, $wrapper;\n      www = $input.data(keys.www);\n      $wrapper = $input.parent().filter(www.selectors.wrapper);\n\n      _.each($input.data(keys.attrs), function (val, key) {\n        _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n      });\n\n      $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n\n      if ($wrapper.length) {\n        $input.detach().insertAfter($wrapper);\n        $wrapper.remove();\n      }\n    }\n\n    function $elOrNull(obj) {\n      var isValid, $el;\n      isValid = _.isJQuery(obj) || _.isElement(obj);\n      $el = isValid ? $(obj).first() : [];\n      return $el.length ? $el : null;\n    }\n  })();\n});","map":{"version":3,"sources":["/home/sinkline/Sasha san/Wacth_Rails/watch_rails/app/javascript/packs/typeahead.bundle.js"],"names":["root","factory","define","amd","a0","exports","module","require","jQuery","$","_","isMsie","test","navigator","userAgent","match","isBlankString","str","escapeRegExChars","replace","isString","obj","isNumber","isArray","isFunction","isObject","isPlainObject","isUndefined","isElement","nodeType","isJQuery","toStr","s","bind","proxy","each","collection","cb","reverseArgs","index","value","map","filter","grep","every","result","key","val","call","some","mixin","extend","identity","x","clone","getIdGenerator","counter","templatify","template","String","defer","fn","setTimeout","debounce","func","wait","immediate","timeout","context","args","arguments","later","callNow","apply","clearTimeout","throttle","previous","Date","now","remaining","stringify","JSON","noop","VERSION","tokenizers","nonword","whitespace","getObjTokenizer","split","tokenizer","setKey","keys","slice","tokenize","o","tokens","k","concat","LruCache","maxSize","reset","set","get","prototype","tailItem","list","tail","node","size","remove","hash","moveToFront","Node","add","List","head","next","prev","PersistentStorage","LOCAL_STORAGE","window","localStorage","setItem","removeItem","err","namespace","override","prefix","join","ttlKey","keyMatcher","RegExp","ls","_noop","_prefix","_ttlKey","clear","isExpired","_safeSet","name","decode","getItem","ttl","encode","i","gatherMatchingKeys","length","getTime","parseJSON","len","push","Transport","pendingRequestsCount","pendingRequests","maxPendingRequests","sharedCache","cancelled","lastReq","_send","transport","_get","limiter","_cache","cache","setMaxPendingRequests","num","resetCache","_fingerprint","fingerprint","url","type","param","data","that","jqXhr","done","fail","always","onDeckRequestArgs","resp","cancel","SearchIndex","CHILDREN","IDS","datumTokenizer","queryTokenizer","error","identify","bootstrap","datums","trie","datum","id","normalizeTokens","token","chars","ch","shift","newNode","ids","search","query","matches","getIntersection","unique","all","values","serialize","toLowerCase","array","seen","uniques","arrayA","arrayB","ai","bi","intersection","sort","lenArrayA","lenArrayB","Prefetch","protocol","thumbprint","prepare","transform","storage","cacheKey","_settings","settings","dataType","store","location","fromCache","stored","fromNetwork","onError","onResponse","Remote","cancelLastRequest","oParser","parse","defaults","sorter","initialize","sufficient","local","prefetch","remote","parsePrefetch","parseRemote","callbackToDeferred","ajax","wildcard","rateLimitBy","rateLimitWait","toRemotePrepare","toLimiter","prepareByReplace","prepareByWildcard","idenityPrepare","encodeURIComponent","method","wrapper","deferred","Deferred","onSuccess","resolve","reject","Bloodhound","old","noConflict","__ttAdapter","ttAdapter","withAsync","withoutAsync","sync","async","_loadPrefetch","loadPrefetch","serialized","promise","_initialize","initPromise","addLocalToIndex","force","processRemote","nonDuplicates","r","l","clearPrefetchCache","clearRemoteCache","WWW","defaultClassNames","input","hint","menu","dataset","suggestion","selectable","empty","open","cursor","highlight","build","www","classes","css","buildCss","html","buildHtml","selectors","buildSelectors","c","v","position","display","top","left","borderColor","boxShadow","opacity","verticalAlign","backgroundColor","inputWithNoHint","zIndex","ltr","right","rtl","backgroundImage","EventBus","deprecationMap","render","cursorchange","select","autocomplete","el","$el","_trigger","$e","Event","unshift","trigger","before","isDefaultPrevented","deprecatedType","EventEmitter","splitter","nextTick","getNextTick","onSync","onAsync","off","on","types","bindContext","_callbacks","callbacks","syncFlush","asyncFlush","getFlush","flush","nextTickFn","setImmediate","nextTickSetImmediate","nextTickSetTimeout","doc","pattern","tagName","className","wordsOnly","caseSensitive","hightlight","regex","getRegex","traverse","hightlightTextNode","textNode","patternNode","wrapperNode","exec","createElement","splitText","appendChild","cloneNode","parentNode","replaceChild","childNode","TEXT_NODE_TYPE","childNodes","patterns","escapedPatterns","regexStr","document","Input","specialKeyCodeMap","$hint","$input","queryWhenFocused","hasFocus","$overflowHelper","buildOverflowHelper","_checkLanguageDirection","setHint","getHint","clearHint","clearHintIfInvalid","normalizeQuery","_onBlur","onBlur","resetInputValue","_onFocus","onFocus","_onKeydown","onKeydown","keyName","which","keyCode","_managePreventDefault","_shouldTrigger","_onInput","onInput","_setQuery","getInputValue","managePreventDefault","preventDefault","withModifier","shouldTrigger","checkLanguageDirection","dir","attr","setQuery","silent","areEquivalent","hasDifferentWhitespace","areQueriesEquivalent","focus","blur","getLangDir","getQuery","setInputValue","hasQueryChangedSinceLastFocus","valIsPrefixOfHint","isValid","indexOf","hasOverflow","is","constraint","width","text","isCursorAtEnd","valueLength","selectionStart","range","selection","createRange","moveStart","destroy","visibility","whiteSpace","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","wordSpacing","letterSpacing","textIndent","textRendering","textTransform","insertAfter","a","b","altKey","ctrlKey","metaKey","shiftKey","Dataset","nameGenerator","templates","notFound","source","isValidName","limit","displayFn","getDisplayFn","displayKey","getTemplates","_resetLastSuggestion","addClass","extractData","_overwrite","overwrite","suggestions","_renderSuggestions","pending","_renderPending","_renderNotFound","_empty","_append","append","$lastSuggestion","_appendSuggestions","renderSuggestions","$fragment","_getSuggestionsFragment","children","last","prepend","_getHeader","_getFooter","appendSuggestions","after","renderPending","renderNotFound","getSuggestionsFragment","fragment","createDocumentFragment","getSuggestionNode","_injectQuery","getFooter","footer","getHeader","header","resetLastSuggestion","injectQuery","_query","update","canceled","syncCalled","rendered","isEmpty","suggestionTemplate","Menu","$node","datasets","initializeDataset","oDataset","find","first","appendTo","_onSelectableClick","onSelectableClick","currentTarget","_onRendered","onRendered","toggleClass","_allDatasetsEmpty","_onCleared","onCleared","_propagate","propagate","allDatasetsEmpty","isDatasetEmpty","_getSelectables","getSelectables","_removeCursor","$selectable","getActiveSelectable","removeClass","_ensureVisible","ensureVisible","elTop","elBottom","nodeScrollTop","nodeHeight","outerHeight","scrollTop","height","parseInt","isOpen","hasClass","close","setLanguageDirection","selectableRelativeToCursor","delta","$selectables","$oldCursor","oldIndex","newIndex","eq","setCursor","getSelectableData","getTopSelectable","isValidUpdate","updateDataset","clearDataset","destroyDataset","DefaultMenu","_show","_hide","hide","show","Typeahead","onFocused","onBlurred","onEnterKeyed","onTabKeyed","onEscKeyed","onUpKeyed","onDownKeyed","onLeftKeyed","onRightKeyed","onQueryChanged","onWhitespaceChanged","eventBus","minLength","enabled","active","activate","_hacks","_onSelectableClicked","_onAsyncRequested","_onAsyncCanceled","_onAsyncReceived","_onDatasetRendered","_onDatasetCleared","_onLangDirChanged","hacks","$menu","isActive","hasActive","activeElement","has","stopImmediatePropagation","onSelectableClicked","onDatasetCleared","_updateHint","onDatasetRendered","onAsyncRequested","onAsyncCanceled","onAsyncReceived","_onFocused","_minLengthMet","_onBlurred","_onEnterKeyed","_onTabKeyed","_onEscKeyed","_onUpKeyed","moveCursor","_onDownKeyed","_onLeftKeyed","_onRightKeyed","_onQueryChanged","e","_onWhitespaceChanged","onLangDirChanged","_openIfActive","openIfActive","minLengthMet","updateHint","escapedQuery","frontMatchRegEx","isEnabled","enable","disable","deactivate","setVal","getVal","$candidate","payload","cancelMove","ctx","methods","typeahead","attrs","classNames","attach","$wrapper","defaultHint","defaultMenu","MenuConstructor","d","$elOrNull","buildHintFromInput","prepInput","wrap","parent","ttEach","t","success","moveCursoe","newVal","revert","$els","removeData","getBackgroundStyles","prop","removeAttr","spellcheck","tabindex","style","backgroundAttachment","backgroundClip","backgroundOrigin","backgroundPosition","backgroundRepeat","backgroundSize","detach"],"mappings":"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","sourcesContent":["/*!\n * typeahead.js 0.11.1\n * https://github.com/twitter/typeahead.js\n * Copyright 2013-2015 Twitter, Inc. and other contributors; Licensed MIT\n */\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"bloodhound\", [ \"jquery\" ], function(a0) {\n            return root[\"Bloodhound\"] = factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        root[\"Bloodhound\"] = factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var VERSION = \"0.11.1\";\n    var tokenizers = function() {\n        \"use strict\";\n        return {\n            nonword: nonword,\n            whitespace: whitespace,\n            obj: {\n                nonword: getObjTokenizer(nonword),\n                whitespace: getObjTokenizer(whitespace)\n            }\n        };\n        function whitespace(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\s+/) : [];\n        }\n        function nonword(str) {\n            str = _.toStr(str);\n            return str ? str.split(/\\W+/) : [];\n        }\n        function getObjTokenizer(tokenizer) {\n            return function setKey(keys) {\n                keys = _.isArray(keys) ? keys : [].slice.call(arguments, 0);\n                return function tokenize(o) {\n                    var tokens = [];\n                    _.each(keys, function(k) {\n                        tokens = tokens.concat(tokenizer(_.toStr(o[k])));\n                    });\n                    return tokens;\n                };\n            };\n        }\n    }();\n    var LruCache = function() {\n        \"use strict\";\n        function LruCache(maxSize) {\n            this.maxSize = _.isNumber(maxSize) ? maxSize : 100;\n            this.reset();\n            if (this.maxSize <= 0) {\n                this.set = this.get = $.noop;\n            }\n        }\n        _.mixin(LruCache.prototype, {\n            set: function set(key, val) {\n                var tailItem = this.list.tail, node;\n                if (this.size >= this.maxSize) {\n                    this.list.remove(tailItem);\n                    delete this.hash[tailItem.key];\n                    this.size--;\n                }\n                if (node = this.hash[key]) {\n                    node.val = val;\n                    this.list.moveToFront(node);\n                } else {\n                    node = new Node(key, val);\n                    this.list.add(node);\n                    this.hash[key] = node;\n                    this.size++;\n                }\n            },\n            get: function get(key) {\n                var node = this.hash[key];\n                if (node) {\n                    this.list.moveToFront(node);\n                    return node.val;\n                }\n            },\n            reset: function reset() {\n                this.size = 0;\n                this.hash = {};\n                this.list = new List();\n            }\n        });\n        function List() {\n            this.head = this.tail = null;\n        }\n        _.mixin(List.prototype, {\n            add: function add(node) {\n                if (this.head) {\n                    node.next = this.head;\n                    this.head.prev = node;\n                }\n                this.head = node;\n                this.tail = this.tail || node;\n            },\n            remove: function remove(node) {\n                node.prev ? node.prev.next = node.next : this.head = node.next;\n                node.next ? node.next.prev = node.prev : this.tail = node.prev;\n            },\n            moveToFront: function(node) {\n                this.remove(node);\n                this.add(node);\n            }\n        });\n        function Node(key, val) {\n            this.key = key;\n            this.val = val;\n            this.prev = this.next = null;\n        }\n        return LruCache;\n    }();\n    var PersistentStorage = function() {\n        \"use strict\";\n        var LOCAL_STORAGE;\n        try {\n            LOCAL_STORAGE = window.localStorage;\n            LOCAL_STORAGE.setItem(\"~~~\", \"!\");\n            LOCAL_STORAGE.removeItem(\"~~~\");\n        } catch (err) {\n            LOCAL_STORAGE = null;\n        }\n        function PersistentStorage(namespace, override) {\n            this.prefix = [ \"__\", namespace, \"__\" ].join(\"\");\n            this.ttlKey = \"__ttl__\";\n            this.keyMatcher = new RegExp(\"^\" + _.escapeRegExChars(this.prefix));\n            this.ls = override || LOCAL_STORAGE;\n            !this.ls && this._noop();\n        }\n        _.mixin(PersistentStorage.prototype, {\n            _prefix: function(key) {\n                return this.prefix + key;\n            },\n            _ttlKey: function(key) {\n                return this._prefix(key) + this.ttlKey;\n            },\n            _noop: function() {\n                this.get = this.set = this.remove = this.clear = this.isExpired = _.noop;\n            },\n            _safeSet: function(key, val) {\n                try {\n                    this.ls.setItem(key, val);\n                } catch (err) {\n                    if (err.name === \"QuotaExceededError\") {\n                        this.clear();\n                        this._noop();\n                    }\n                }\n            },\n            get: function(key) {\n                if (this.isExpired(key)) {\n                    this.remove(key);\n                }\n                return decode(this.ls.getItem(this._prefix(key)));\n            },\n            set: function(key, val, ttl) {\n                if (_.isNumber(ttl)) {\n                    this._safeSet(this._ttlKey(key), encode(now() + ttl));\n                } else {\n                    this.ls.removeItem(this._ttlKey(key));\n                }\n                return this._safeSet(this._prefix(key), encode(val));\n            },\n            remove: function(key) {\n                this.ls.removeItem(this._ttlKey(key));\n                this.ls.removeItem(this._prefix(key));\n                return this;\n            },\n            clear: function() {\n                var i, keys = gatherMatchingKeys(this.keyMatcher);\n                for (i = keys.length; i--; ) {\n                    this.remove(keys[i]);\n                }\n                return this;\n            },\n            isExpired: function(key) {\n                var ttl = decode(this.ls.getItem(this._ttlKey(key)));\n                return _.isNumber(ttl) && now() > ttl ? true : false;\n            }\n        });\n        return PersistentStorage;\n        function now() {\n            return new Date().getTime();\n        }\n        function encode(val) {\n            return JSON.stringify(_.isUndefined(val) ? null : val);\n        }\n        function decode(val) {\n            return $.parseJSON(val);\n        }\n        function gatherMatchingKeys(keyMatcher) {\n            var i, key, keys = [], len = LOCAL_STORAGE.length;\n            for (i = 0; i < len; i++) {\n                if ((key = LOCAL_STORAGE.key(i)).match(keyMatcher)) {\n                    keys.push(key.replace(keyMatcher, \"\"));\n                }\n            }\n            return keys;\n        }\n    }();\n    var Transport = function() {\n        \"use strict\";\n        var pendingRequestsCount = 0, pendingRequests = {}, maxPendingRequests = 6, sharedCache = new LruCache(10);\n        function Transport(o) {\n            o = o || {};\n            this.cancelled = false;\n            this.lastReq = null;\n            this._send = o.transport;\n            this._get = o.limiter ? o.limiter(this._get) : this._get;\n            this._cache = o.cache === false ? new LruCache(0) : sharedCache;\n        }\n        Transport.setMaxPendingRequests = function setMaxPendingRequests(num) {\n            maxPendingRequests = num;\n        };\n        Transport.resetCache = function resetCache() {\n            sharedCache.reset();\n        };\n        _.mixin(Transport.prototype, {\n            _fingerprint: function fingerprint(o) {\n                o = o || {};\n                return o.url + o.type + $.param(o.data || {});\n            },\n            _get: function(o, cb) {\n                var that = this, fingerprint, jqXhr;\n                fingerprint = this._fingerprint(o);\n                if (this.cancelled || fingerprint !== this.lastReq) {\n                    return;\n                }\n                if (jqXhr = pendingRequests[fingerprint]) {\n                    jqXhr.done(done).fail(fail);\n                } else if (pendingRequestsCount < maxPendingRequests) {\n                    pendingRequestsCount++;\n                    pendingRequests[fingerprint] = this._send(o).done(done).fail(fail).always(always);\n                } else {\n                    this.onDeckRequestArgs = [].slice.call(arguments, 0);\n                }\n                function done(resp) {\n                    cb(null, resp);\n                    that._cache.set(fingerprint, resp);\n                }\n                function fail() {\n                    cb(true);\n                }\n                function always() {\n                    pendingRequestsCount--;\n                    delete pendingRequests[fingerprint];\n                    if (that.onDeckRequestArgs) {\n                        that._get.apply(that, that.onDeckRequestArgs);\n                        that.onDeckRequestArgs = null;\n                    }\n                }\n            },\n            get: function(o, cb) {\n                var resp, fingerprint;\n                cb = cb || $.noop;\n                o = _.isString(o) ? {\n                    url: o\n                } : o || {};\n                fingerprint = this._fingerprint(o);\n                this.cancelled = false;\n                this.lastReq = fingerprint;\n                if (resp = this._cache.get(fingerprint)) {\n                    cb(null, resp);\n                } else {\n                    this._get(o, cb);\n                }\n            },\n            cancel: function() {\n                this.cancelled = true;\n            }\n        });\n        return Transport;\n    }();\n    var SearchIndex = window.SearchIndex = function() {\n        \"use strict\";\n        var CHILDREN = \"c\", IDS = \"i\";\n        function SearchIndex(o) {\n            o = o || {};\n            if (!o.datumTokenizer || !o.queryTokenizer) {\n                $.error(\"datumTokenizer and queryTokenizer are both required\");\n            }\n            this.identify = o.identify || _.stringify;\n            this.datumTokenizer = o.datumTokenizer;\n            this.queryTokenizer = o.queryTokenizer;\n            this.reset();\n        }\n        _.mixin(SearchIndex.prototype, {\n            bootstrap: function bootstrap(o) {\n                this.datums = o.datums;\n                this.trie = o.trie;\n            },\n            add: function(data) {\n                var that = this;\n                data = _.isArray(data) ? data : [ data ];\n                _.each(data, function(datum) {\n                    var id, tokens;\n                    that.datums[id = that.identify(datum)] = datum;\n                    tokens = normalizeTokens(that.datumTokenizer(datum));\n                    _.each(tokens, function(token) {\n                        var node, chars, ch;\n                        node = that.trie;\n                        chars = token.split(\"\");\n                        while (ch = chars.shift()) {\n                            node = node[CHILDREN][ch] || (node[CHILDREN][ch] = newNode());\n                            node[IDS].push(id);\n                        }\n                    });\n                });\n            },\n            get: function get(ids) {\n                var that = this;\n                return _.map(ids, function(id) {\n                    return that.datums[id];\n                });\n            },\n            search: function search(query) {\n                var that = this, tokens, matches;\n                tokens = normalizeTokens(this.queryTokenizer(query));\n                _.each(tokens, function(token) {\n                    var node, chars, ch, ids;\n                    if (matches && matches.length === 0) {\n                        return false;\n                    }\n                    node = that.trie;\n                    chars = token.split(\"\");\n                    while (node && (ch = chars.shift())) {\n                        node = node[CHILDREN][ch];\n                    }\n                    if (node && chars.length === 0) {\n                        ids = node[IDS].slice(0);\n                        matches = matches ? getIntersection(matches, ids) : ids;\n                    } else {\n                        matches = [];\n                        return false;\n                    }\n                });\n                return matches ? _.map(unique(matches), function(id) {\n                    return that.datums[id];\n                }) : [];\n            },\n            all: function all() {\n                var values = [];\n                for (var key in this.datums) {\n                    values.push(this.datums[key]);\n                }\n                return values;\n            },\n            reset: function reset() {\n                this.datums = {};\n                this.trie = newNode();\n            },\n            serialize: function serialize() {\n                return {\n                    datums: this.datums,\n                    trie: this.trie\n                };\n            }\n        });\n        return SearchIndex;\n        function normalizeTokens(tokens) {\n            tokens = _.filter(tokens, function(token) {\n                return !!token;\n            });\n            tokens = _.map(tokens, function(token) {\n                return token.toLowerCase();\n            });\n            return tokens;\n        }\n        function newNode() {\n            var node = {};\n            node[IDS] = [];\n            node[CHILDREN] = {};\n            return node;\n        }\n        function unique(array) {\n            var seen = {}, uniques = [];\n            for (var i = 0, len = array.length; i < len; i++) {\n                if (!seen[array[i]]) {\n                    seen[array[i]] = true;\n                    uniques.push(array[i]);\n                }\n            }\n            return uniques;\n        }\n        function getIntersection(arrayA, arrayB) {\n            var ai = 0, bi = 0, intersection = [];\n            arrayA = arrayA.sort();\n            arrayB = arrayB.sort();\n            var lenArrayA = arrayA.length, lenArrayB = arrayB.length;\n            while (ai < lenArrayA && bi < lenArrayB) {\n                if (arrayA[ai] < arrayB[bi]) {\n                    ai++;\n                } else if (arrayA[ai] > arrayB[bi]) {\n                    bi++;\n                } else {\n                    intersection.push(arrayA[ai]);\n                    ai++;\n                    bi++;\n                }\n            }\n            return intersection;\n        }\n    }();\n    var Prefetch = function() {\n        \"use strict\";\n        var keys;\n        keys = {\n            data: \"data\",\n            protocol: \"protocol\",\n            thumbprint: \"thumbprint\"\n        };\n        function Prefetch(o) {\n            this.url = o.url;\n            this.ttl = o.ttl;\n            this.cache = o.cache;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = o.transport;\n            this.thumbprint = o.thumbprint;\n            this.storage = new PersistentStorage(o.cacheKey);\n        }\n        _.mixin(Prefetch.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            store: function store(data) {\n                if (!this.cache) {\n                    return;\n                }\n                this.storage.set(keys.data, data, this.ttl);\n                this.storage.set(keys.protocol, location.protocol, this.ttl);\n                this.storage.set(keys.thumbprint, this.thumbprint, this.ttl);\n            },\n            fromCache: function fromCache() {\n                var stored = {}, isExpired;\n                if (!this.cache) {\n                    return null;\n                }\n                stored.data = this.storage.get(keys.data);\n                stored.protocol = this.storage.get(keys.protocol);\n                stored.thumbprint = this.storage.get(keys.thumbprint);\n                isExpired = stored.thumbprint !== this.thumbprint || stored.protocol !== location.protocol;\n                return stored.data && !isExpired ? stored.data : null;\n            },\n            fromNetwork: function(cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                settings = this.prepare(this._settings());\n                this.transport(settings).fail(onError).done(onResponse);\n                function onError() {\n                    cb(true);\n                }\n                function onResponse(resp) {\n                    cb(null, that.transform(resp));\n                }\n            },\n            clear: function clear() {\n                this.storage.clear();\n                return this;\n            }\n        });\n        return Prefetch;\n    }();\n    var Remote = function() {\n        \"use strict\";\n        function Remote(o) {\n            this.url = o.url;\n            this.prepare = o.prepare;\n            this.transform = o.transform;\n            this.transport = new Transport({\n                cache: o.cache,\n                limiter: o.limiter,\n                transport: o.transport\n            });\n        }\n        _.mixin(Remote.prototype, {\n            _settings: function settings() {\n                return {\n                    url: this.url,\n                    type: \"GET\",\n                    dataType: \"json\"\n                };\n            },\n            get: function get(query, cb) {\n                var that = this, settings;\n                if (!cb) {\n                    return;\n                }\n                query = query || \"\";\n                settings = this.prepare(query, this._settings());\n                return this.transport.get(settings, onResponse);\n                function onResponse(err, resp) {\n                    err ? cb([]) : cb(that.transform(resp));\n                }\n            },\n            cancelLastRequest: function cancelLastRequest() {\n                this.transport.cancel();\n            }\n        });\n        return Remote;\n    }();\n    var oParser = function() {\n        \"use strict\";\n        return function parse(o) {\n            var defaults, sorter;\n            defaults = {\n                initialize: true,\n                identify: _.stringify,\n                datumTokenizer: null,\n                queryTokenizer: null,\n                sufficient: 5,\n                sorter: null,\n                local: [],\n                prefetch: null,\n                remote: null\n            };\n            o = _.mixin(defaults, o || {});\n            !o.datumTokenizer && $.error(\"datumTokenizer is required\");\n            !o.queryTokenizer && $.error(\"queryTokenizer is required\");\n            sorter = o.sorter;\n            o.sorter = sorter ? function(x) {\n                return x.sort(sorter);\n            } : _.identity;\n            o.local = _.isFunction(o.local) ? o.local() : o.local;\n            o.prefetch = parsePrefetch(o.prefetch);\n            o.remote = parseRemote(o.remote);\n            return o;\n        };\n        function parsePrefetch(o) {\n            var defaults;\n            if (!o) {\n                return null;\n            }\n            defaults = {\n                url: null,\n                ttl: 24 * 60 * 60 * 1e3,\n                cache: true,\n                cacheKey: null,\n                thumbprint: \"\",\n                prepare: _.identity,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"prefetch requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.cacheKey = o.cacheKey || o.url;\n            o.thumbprint = VERSION + o.thumbprint;\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            return o;\n        }\n        function parseRemote(o) {\n            var defaults;\n            if (!o) {\n                return;\n            }\n            defaults = {\n                url: null,\n                cache: true,\n                prepare: null,\n                replace: null,\n                wildcard: null,\n                limiter: null,\n                rateLimitBy: \"debounce\",\n                rateLimitWait: 300,\n                transform: _.identity,\n                transport: null\n            };\n            o = _.isString(o) ? {\n                url: o\n            } : o;\n            o = _.mixin(defaults, o);\n            !o.url && $.error(\"remote requires url to be set\");\n            o.transform = o.filter || o.transform;\n            o.prepare = toRemotePrepare(o);\n            o.limiter = toLimiter(o);\n            o.transport = o.transport ? callbackToDeferred(o.transport) : $.ajax;\n            delete o.replace;\n            delete o.wildcard;\n            delete o.rateLimitBy;\n            delete o.rateLimitWait;\n            return o;\n        }\n        function toRemotePrepare(o) {\n            var prepare, replace, wildcard;\n            prepare = o.prepare;\n            replace = o.replace;\n            wildcard = o.wildcard;\n            if (prepare) {\n                return prepare;\n            }\n            if (replace) {\n                prepare = prepareByReplace;\n            } else if (o.wildcard) {\n                prepare = prepareByWildcard;\n            } else {\n                prepare = idenityPrepare;\n            }\n            return prepare;\n            function prepareByReplace(query, settings) {\n                settings.url = replace(settings.url, query);\n                return settings;\n            }\n            function prepareByWildcard(query, settings) {\n                settings.url = settings.url.replace(wildcard, encodeURIComponent(query));\n                return settings;\n            }\n            function idenityPrepare(query, settings) {\n                return settings;\n            }\n        }\n        function toLimiter(o) {\n            var limiter, method, wait;\n            limiter = o.limiter;\n            method = o.rateLimitBy;\n            wait = o.rateLimitWait;\n            if (!limiter) {\n                limiter = /^throttle$/i.test(method) ? throttle(wait) : debounce(wait);\n            }\n            return limiter;\n            function debounce(wait) {\n                return function debounce(fn) {\n                    return _.debounce(fn, wait);\n                };\n            }\n            function throttle(wait) {\n                return function throttle(fn) {\n                    return _.throttle(fn, wait);\n                };\n            }\n        }\n        function callbackToDeferred(fn) {\n            return function wrapper(o) {\n                var deferred = $.Deferred();\n                fn(o, onSuccess, onError);\n                return deferred;\n                function onSuccess(resp) {\n                    _.defer(function() {\n                        deferred.resolve(resp);\n                    });\n                }\n                function onError(err) {\n                    _.defer(function() {\n                        deferred.reject(err);\n                    });\n                }\n            };\n        }\n    }();\n    var Bloodhound = function() {\n        \"use strict\";\n        var old;\n        old = window && window.Bloodhound;\n        function Bloodhound(o) {\n            o = oParser(o);\n            this.sorter = o.sorter;\n            this.identify = o.identify;\n            this.sufficient = o.sufficient;\n            this.local = o.local;\n            this.remote = o.remote ? new Remote(o.remote) : null;\n            this.prefetch = o.prefetch ? new Prefetch(o.prefetch) : null;\n            this.index = new SearchIndex({\n                identify: this.identify,\n                datumTokenizer: o.datumTokenizer,\n                queryTokenizer: o.queryTokenizer\n            });\n            o.initialize !== false && this.initialize();\n        }\n        Bloodhound.noConflict = function noConflict() {\n            window && (window.Bloodhound = old);\n            return Bloodhound;\n        };\n        Bloodhound.tokenizers = tokenizers;\n        _.mixin(Bloodhound.prototype, {\n            __ttAdapter: function ttAdapter() {\n                var that = this;\n                return this.remote ? withAsync : withoutAsync;\n                function withAsync(query, sync, async) {\n                    return that.search(query, sync, async);\n                }\n                function withoutAsync(query, sync) {\n                    return that.search(query, sync);\n                }\n            },\n            _loadPrefetch: function loadPrefetch() {\n                var that = this, deferred, serialized;\n                deferred = $.Deferred();\n                if (!this.prefetch) {\n                    deferred.resolve();\n                } else if (serialized = this.prefetch.fromCache()) {\n                    this.index.bootstrap(serialized);\n                    deferred.resolve();\n                } else {\n                    this.prefetch.fromNetwork(done);\n                }\n                return deferred.promise();\n                function done(err, data) {\n                    if (err) {\n                        return deferred.reject();\n                    }\n                    that.add(data);\n                    that.prefetch.store(that.index.serialize());\n                    deferred.resolve();\n                }\n            },\n            _initialize: function initialize() {\n                var that = this, deferred;\n                this.clear();\n                (this.initPromise = this._loadPrefetch()).done(addLocalToIndex);\n                return this.initPromise;\n                function addLocalToIndex() {\n                    that.add(that.local);\n                }\n            },\n            initialize: function initialize(force) {\n                return !this.initPromise || force ? this._initialize() : this.initPromise;\n            },\n            add: function add(data) {\n                this.index.add(data);\n                return this;\n            },\n            get: function get(ids) {\n                ids = _.isArray(ids) ? ids : [].slice.call(arguments);\n                return this.index.get(ids);\n            },\n            search: function search(query, sync, async) {\n                var that = this, local;\n                local = this.sorter(this.index.search(query));\n                sync(this.remote ? local.slice() : local);\n                if (this.remote && local.length < this.sufficient) {\n                    this.remote.get(query, processRemote);\n                } else if (this.remote) {\n                    this.remote.cancelLastRequest();\n                }\n                return this;\n                function processRemote(remote) {\n                    var nonDuplicates = [];\n                    _.each(remote, function(r) {\n                        !_.some(local, function(l) {\n                            return that.identify(r) === that.identify(l);\n                        }) && nonDuplicates.push(r);\n                    });\n                    async && async(nonDuplicates);\n                }\n            },\n            all: function all() {\n                return this.index.all();\n            },\n            clear: function clear() {\n                this.index.reset();\n                return this;\n            },\n            clearPrefetchCache: function clearPrefetchCache() {\n                this.prefetch && this.prefetch.clear();\n                return this;\n            },\n            clearRemoteCache: function clearRemoteCache() {\n                Transport.resetCache();\n                return this;\n            },\n            ttAdapter: function ttAdapter() {\n                return this.__ttAdapter();\n            }\n        });\n        return Bloodhound;\n    }();\n    return Bloodhound;\n});\n\n(function(root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(\"typeahead.js\", [ \"jquery\" ], function(a0) {\n            return factory(a0);\n        });\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require(\"jquery\"));\n    } else {\n        factory(jQuery);\n    }\n})(this, function($) {\n    var _ = function() {\n        \"use strict\";\n        return {\n            isMsie: function() {\n                return /(msie|trident)/i.test(navigator.userAgent) ? navigator.userAgent.match(/(msie |rv:)(\\d+(.\\d+)?)/i)[2] : false;\n            },\n            isBlankString: function(str) {\n                return !str || /^\\s*$/.test(str);\n            },\n            escapeRegExChars: function(str) {\n                return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n            },\n            isString: function(obj) {\n                return typeof obj === \"string\";\n            },\n            isNumber: function(obj) {\n                return typeof obj === \"number\";\n            },\n            isArray: $.isArray,\n            isFunction: $.isFunction,\n            isObject: $.isPlainObject,\n            isUndefined: function(obj) {\n                return typeof obj === \"undefined\";\n            },\n            isElement: function(obj) {\n                return !!(obj && obj.nodeType === 1);\n            },\n            isJQuery: function(obj) {\n                return obj instanceof $;\n            },\n            toStr: function toStr(s) {\n                return _.isUndefined(s) || s === null ? \"\" : s + \"\";\n            },\n            bind: $.proxy,\n            each: function(collection, cb) {\n                $.each(collection, reverseArgs);\n                function reverseArgs(index, value) {\n                    return cb(value, index);\n                }\n            },\n            map: $.map,\n            filter: $.grep,\n            every: function(obj, test) {\n                var result = true;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (!(result = test.call(null, val, key, obj))) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            some: function(obj, test) {\n                var result = false;\n                if (!obj) {\n                    return result;\n                }\n                $.each(obj, function(key, val) {\n                    if (result = test.call(null, val, key, obj)) {\n                        return false;\n                    }\n                });\n                return !!result;\n            },\n            mixin: $.extend,\n            identity: function(x) {\n                return x;\n            },\n            clone: function(obj) {\n                return $.extend(true, {}, obj);\n            },\n            getIdGenerator: function() {\n                var counter = 0;\n                return function() {\n                    return counter++;\n                };\n            },\n            templatify: function templatify(obj) {\n                return $.isFunction(obj) ? obj : template;\n                function template() {\n                    return String(obj);\n                }\n            },\n            defer: function(fn) {\n                setTimeout(fn, 0);\n            },\n            debounce: function(func, wait, immediate) {\n                var timeout, result;\n                return function() {\n                    var context = this, args = arguments, later, callNow;\n                    later = function() {\n                        timeout = null;\n                        if (!immediate) {\n                            result = func.apply(context, args);\n                        }\n                    };\n                    callNow = immediate && !timeout;\n                    clearTimeout(timeout);\n                    timeout = setTimeout(later, wait);\n                    if (callNow) {\n                        result = func.apply(context, args);\n                    }\n                    return result;\n                };\n            },\n            throttle: function(func, wait) {\n                var context, args, timeout, result, previous, later;\n                previous = 0;\n                later = function() {\n                    previous = new Date();\n                    timeout = null;\n                    result = func.apply(context, args);\n                };\n                return function() {\n                    var now = new Date(), remaining = wait - (now - previous);\n                    context = this;\n                    args = arguments;\n                    if (remaining <= 0) {\n                        clearTimeout(timeout);\n                        timeout = null;\n                        previous = now;\n                        result = func.apply(context, args);\n                    } else if (!timeout) {\n                        timeout = setTimeout(later, remaining);\n                    }\n                    return result;\n                };\n            },\n            stringify: function(val) {\n                return _.isString(val) ? val : JSON.stringify(val);\n            },\n            noop: function() {}\n        };\n    }();\n    var WWW = function() {\n        \"use strict\";\n        var defaultClassNames = {\n            wrapper: \"twitter-typeahead\",\n            input: \"tt-input\",\n            hint: \"tt-hint\",\n            menu: \"tt-menu\",\n            dataset: \"tt-dataset\",\n            suggestion: \"tt-suggestion\",\n            selectable: \"tt-selectable\",\n            empty: \"tt-empty\",\n            open: \"tt-open\",\n            cursor: \"tt-cursor\",\n            highlight: \"tt-highlight\"\n        };\n        return build;\n        function build(o) {\n            var www, classes;\n            classes = _.mixin({}, defaultClassNames, o);\n            www = {\n                css: buildCss(),\n                classes: classes,\n                html: buildHtml(classes),\n                selectors: buildSelectors(classes)\n            };\n            return {\n                css: www.css,\n                html: www.html,\n                classes: www.classes,\n                selectors: www.selectors,\n                mixin: function(o) {\n                    _.mixin(o, www);\n                }\n            };\n        }\n        function buildHtml(c) {\n            return {\n                wrapper: '<span class=\"' + c.wrapper + '\"></span>',\n                menu: '<div class=\"' + c.menu + '\"></div>'\n            };\n        }\n        function buildSelectors(classes) {\n            var selectors = {};\n            _.each(classes, function(v, k) {\n                selectors[k] = \".\" + v;\n            });\n            return selectors;\n        }\n        function buildCss() {\n            var css = {\n                wrapper: {\n                    position: \"relative\",\n                    display: \"inline-block\"\n                },\n                hint: {\n                    position: \"absolute\",\n                    top: \"0\",\n                    left: \"0\",\n                    borderColor: \"transparent\",\n                    boxShadow: \"none\",\n                    opacity: \"1\"\n                },\n                input: {\n                    position: \"relative\",\n                    verticalAlign: \"top\",\n                    backgroundColor: \"transparent\"\n                },\n                inputWithNoHint: {\n                    position: \"relative\",\n                    verticalAlign: \"top\"\n                },\n                menu: {\n                    position: \"absolute\",\n                    top: \"100%\",\n                    left: \"0\",\n                    zIndex: \"100\",\n                    display: \"none\"\n                },\n                ltr: {\n                    left: \"0\",\n                    right: \"auto\"\n                },\n                rtl: {\n                    left: \"auto\",\n                    right: \" 0\"\n                }\n            };\n            if (_.isMsie()) {\n                _.mixin(css.input, {\n                    backgroundImage: \"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)\"\n                });\n            }\n            return css;\n        }\n    }();\n    var EventBus = function() {\n        \"use strict\";\n        var namespace, deprecationMap;\n        namespace = \"typeahead:\";\n        deprecationMap = {\n            render: \"rendered\",\n            cursorchange: \"cursorchanged\",\n            select: \"selected\",\n            autocomplete: \"autocompleted\"\n        };\n        function EventBus(o) {\n            if (!o || !o.el) {\n                $.error(\"EventBus initialized without el\");\n            }\n            this.$el = $(o.el);\n        }\n        _.mixin(EventBus.prototype, {\n            _trigger: function(type, args) {\n                var $e;\n                $e = $.Event(namespace + type);\n                (args = args || []).unshift($e);\n                this.$el.trigger.apply(this.$el, args);\n                return $e;\n            },\n            before: function(type) {\n                var args, $e;\n                args = [].slice.call(arguments, 1);\n                $e = this._trigger(\"before\" + type, args);\n                return $e.isDefaultPrevented();\n            },\n            trigger: function(type) {\n                var deprecatedType;\n                this._trigger(type, [].slice.call(arguments, 1));\n                if (deprecatedType = deprecationMap[type]) {\n                    this._trigger(deprecatedType, [].slice.call(arguments, 1));\n                }\n            }\n        });\n        return EventBus;\n    }();\n    var EventEmitter = function() {\n        \"use strict\";\n        var splitter = /\\s+/, nextTick = getNextTick();\n        return {\n            onSync: onSync,\n            onAsync: onAsync,\n            off: off,\n            trigger: trigger\n        };\n        function on(method, types, cb, context) {\n            var type;\n            if (!cb) {\n                return this;\n            }\n            types = types.split(splitter);\n            cb = context ? bindContext(cb, context) : cb;\n            this._callbacks = this._callbacks || {};\n            while (type = types.shift()) {\n                this._callbacks[type] = this._callbacks[type] || {\n                    sync: [],\n                    async: []\n                };\n                this._callbacks[type][method].push(cb);\n            }\n            return this;\n        }\n        function onAsync(types, cb, context) {\n            return on.call(this, \"async\", types, cb, context);\n        }\n        function onSync(types, cb, context) {\n            return on.call(this, \"sync\", types, cb, context);\n        }\n        function off(types) {\n            var type;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            while (type = types.shift()) {\n                delete this._callbacks[type];\n            }\n            return this;\n        }\n        function trigger(types) {\n            var type, callbacks, args, syncFlush, asyncFlush;\n            if (!this._callbacks) {\n                return this;\n            }\n            types = types.split(splitter);\n            args = [].slice.call(arguments, 1);\n            while ((type = types.shift()) && (callbacks = this._callbacks[type])) {\n                syncFlush = getFlush(callbacks.sync, this, [ type ].concat(args));\n                asyncFlush = getFlush(callbacks.async, this, [ type ].concat(args));\n                syncFlush() && nextTick(asyncFlush);\n            }\n            return this;\n        }\n        function getFlush(callbacks, context, args) {\n            return flush;\n            function flush() {\n                var cancelled;\n                for (var i = 0, len = callbacks.length; !cancelled && i < len; i += 1) {\n                    cancelled = callbacks[i].apply(context, args) === false;\n                }\n                return !cancelled;\n            }\n        }\n        function getNextTick() {\n            var nextTickFn;\n            if (window.setImmediate) {\n                nextTickFn = function nextTickSetImmediate(fn) {\n                    setImmediate(function() {\n                        fn();\n                    });\n                };\n            } else {\n                nextTickFn = function nextTickSetTimeout(fn) {\n                    setTimeout(function() {\n                        fn();\n                    }, 0);\n                };\n            }\n            return nextTickFn;\n        }\n        function bindContext(fn, context) {\n            return fn.bind ? fn.bind(context) : function() {\n                fn.apply(context, [].slice.call(arguments, 0));\n            };\n        }\n    }();\n    var highlight = function(doc) {\n        \"use strict\";\n        var defaults = {\n            node: null,\n            pattern: null,\n            tagName: \"strong\",\n            className: null,\n            wordsOnly: false,\n            caseSensitive: false\n        };\n        return function hightlight(o) {\n            var regex;\n            o = _.mixin({}, defaults, o);\n            if (!o.node || !o.pattern) {\n                return;\n            }\n            o.pattern = _.isArray(o.pattern) ? o.pattern : [ o.pattern ];\n            regex = getRegex(o.pattern, o.caseSensitive, o.wordsOnly);\n            traverse(o.node, hightlightTextNode);\n            function hightlightTextNode(textNode) {\n                var match, patternNode, wrapperNode;\n                if (match = regex.exec(textNode.data)) {\n                    wrapperNode = doc.createElement(o.tagName);\n                    o.className && (wrapperNode.className = o.className);\n                    patternNode = textNode.splitText(match.index);\n                    patternNode.splitText(match[0].length);\n                    wrapperNode.appendChild(patternNode.cloneNode(true));\n                    textNode.parentNode.replaceChild(wrapperNode, patternNode);\n                }\n                return !!match;\n            }\n            function traverse(el, hightlightTextNode) {\n                var childNode, TEXT_NODE_TYPE = 3;\n                for (var i = 0; i < el.childNodes.length; i++) {\n                    childNode = el.childNodes[i];\n                    if (childNode.nodeType === TEXT_NODE_TYPE) {\n                        i += hightlightTextNode(childNode) ? 1 : 0;\n                    } else {\n                        traverse(childNode, hightlightTextNode);\n                    }\n                }\n            }\n        };\n        function getRegex(patterns, caseSensitive, wordsOnly) {\n            var escapedPatterns = [], regexStr;\n            for (var i = 0, len = patterns.length; i < len; i++) {\n                escapedPatterns.push(_.escapeRegExChars(patterns[i]));\n            }\n            regexStr = wordsOnly ? \"\\\\b(\" + escapedPatterns.join(\"|\") + \")\\\\b\" : \"(\" + escapedPatterns.join(\"|\") + \")\";\n            return caseSensitive ? new RegExp(regexStr) : new RegExp(regexStr, \"i\");\n        }\n    }(window.document);\n    var Input = function() {\n        \"use strict\";\n        var specialKeyCodeMap;\n        specialKeyCodeMap = {\n            9: \"tab\",\n            27: \"esc\",\n            37: \"left\",\n            39: \"right\",\n            13: \"enter\",\n            38: \"up\",\n            40: \"down\"\n        };\n        function Input(o, www) {\n            o = o || {};\n            if (!o.input) {\n                $.error(\"input is missing\");\n            }\n            www.mixin(this);\n            this.$hint = $(o.hint);\n            this.$input = $(o.input);\n            this.query = this.$input.val();\n            this.queryWhenFocused = this.hasFocus() ? this.query : null;\n            this.$overflowHelper = buildOverflowHelper(this.$input);\n            this._checkLanguageDirection();\n            if (this.$hint.length === 0) {\n                this.setHint = this.getHint = this.clearHint = this.clearHintIfInvalid = _.noop;\n            }\n        }\n        Input.normalizeQuery = function(str) {\n            return _.toStr(str).replace(/^\\s*/g, \"\").replace(/\\s{2,}/g, \" \");\n        };\n        _.mixin(Input.prototype, EventEmitter, {\n            _onBlur: function onBlur() {\n                this.resetInputValue();\n                this.trigger(\"blurred\");\n            },\n            _onFocus: function onFocus() {\n                this.queryWhenFocused = this.query;\n                this.trigger(\"focused\");\n            },\n            _onKeydown: function onKeydown($e) {\n                var keyName = specialKeyCodeMap[$e.which || $e.keyCode];\n                this._managePreventDefault(keyName, $e);\n                if (keyName && this._shouldTrigger(keyName, $e)) {\n                    this.trigger(keyName + \"Keyed\", $e);\n                }\n            },\n            _onInput: function onInput() {\n                this._setQuery(this.getInputValue());\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            _managePreventDefault: function managePreventDefault(keyName, $e) {\n                var preventDefault;\n                switch (keyName) {\n                  case \"up\":\n                  case \"down\":\n                    preventDefault = !withModifier($e);\n                    break;\n\n                  default:\n                    preventDefault = false;\n                }\n                preventDefault && $e.preventDefault();\n            },\n            _shouldTrigger: function shouldTrigger(keyName, $e) {\n                var trigger;\n                switch (keyName) {\n                  case \"tab\":\n                    trigger = !withModifier($e);\n                    break;\n\n                  default:\n                    trigger = true;\n                }\n                return trigger;\n            },\n            _checkLanguageDirection: function checkLanguageDirection() {\n                var dir = (this.$input.css(\"direction\") || \"ltr\").toLowerCase();\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.$hint.attr(\"dir\", dir);\n                    this.trigger(\"langDirChanged\", dir);\n                }\n            },\n            _setQuery: function setQuery(val, silent) {\n                var areEquivalent, hasDifferentWhitespace;\n                areEquivalent = areQueriesEquivalent(val, this.query);\n                hasDifferentWhitespace = areEquivalent ? this.query.length !== val.length : false;\n                this.query = val;\n                if (!silent && !areEquivalent) {\n                    this.trigger(\"queryChanged\", this.query);\n                } else if (!silent && hasDifferentWhitespace) {\n                    this.trigger(\"whitespaceChanged\", this.query);\n                }\n            },\n            bind: function() {\n                var that = this, onBlur, onFocus, onKeydown, onInput;\n                onBlur = _.bind(this._onBlur, this);\n                onFocus = _.bind(this._onFocus, this);\n                onKeydown = _.bind(this._onKeydown, this);\n                onInput = _.bind(this._onInput, this);\n                this.$input.on(\"blur.tt\", onBlur).on(\"focus.tt\", onFocus).on(\"keydown.tt\", onKeydown);\n                if (!_.isMsie() || _.isMsie() > 9) {\n                    this.$input.on(\"input.tt\", onInput);\n                } else {\n                    this.$input.on(\"keydown.tt keypress.tt cut.tt paste.tt\", function($e) {\n                        if (specialKeyCodeMap[$e.which || $e.keyCode]) {\n                            return;\n                        }\n                        _.defer(_.bind(that._onInput, that, $e));\n                    });\n                }\n                return this;\n            },\n            focus: function focus() {\n                this.$input.focus();\n            },\n            blur: function blur() {\n                this.$input.blur();\n            },\n            getLangDir: function getLangDir() {\n                return this.dir;\n            },\n            getQuery: function getQuery() {\n                return this.query || \"\";\n            },\n            setQuery: function setQuery(val, silent) {\n                this.setInputValue(val);\n                this._setQuery(val, silent);\n            },\n            hasQueryChangedSinceLastFocus: function hasQueryChangedSinceLastFocus() {\n                return this.query !== this.queryWhenFocused;\n            },\n            getInputValue: function getInputValue() {\n                return this.$input.val();\n            },\n            setInputValue: function setInputValue(value) {\n                this.$input.val(value);\n                this.clearHintIfInvalid();\n                this._checkLanguageDirection();\n            },\n            resetInputValue: function resetInputValue() {\n                this.setInputValue(this.query);\n            },\n            getHint: function getHint() {\n                return this.$hint.val();\n            },\n            setHint: function setHint(value) {\n                this.$hint.val(value);\n            },\n            clearHint: function clearHint() {\n                this.setHint(\"\");\n            },\n            clearHintIfInvalid: function clearHintIfInvalid() {\n                var val, hint, valIsPrefixOfHint, isValid;\n                val = this.getInputValue();\n                hint = this.getHint();\n                valIsPrefixOfHint = val !== hint && hint.indexOf(val) === 0;\n                isValid = val !== \"\" && valIsPrefixOfHint && !this.hasOverflow();\n                !isValid && this.clearHint();\n            },\n            hasFocus: function hasFocus() {\n                return this.$input.is(\":focus\");\n            },\n            hasOverflow: function hasOverflow() {\n                var constraint = this.$input.width() - 2;\n                this.$overflowHelper.text(this.getInputValue());\n                return this.$overflowHelper.width() >= constraint;\n            },\n            isCursorAtEnd: function() {\n                var valueLength, selectionStart, range;\n                valueLength = this.$input.val().length;\n                selectionStart = this.$input[0].selectionStart;\n                if (_.isNumber(selectionStart)) {\n                    return selectionStart === valueLength;\n                } else if (document.selection) {\n                    range = document.selection.createRange();\n                    range.moveStart(\"character\", -valueLength);\n                    return valueLength === range.text.length;\n                }\n                return true;\n            },\n            destroy: function destroy() {\n                this.$hint.off(\".tt\");\n                this.$input.off(\".tt\");\n                this.$overflowHelper.remove();\n                this.$hint = this.$input = this.$overflowHelper = $(\"<div>\");\n            }\n        });\n        return Input;\n        function buildOverflowHelper($input) {\n            return $('<pre aria-hidden=\"true\"></pre>').css({\n                position: \"absolute\",\n                visibility: \"hidden\",\n                whiteSpace: \"pre\",\n                fontFamily: $input.css(\"font-family\"),\n                fontSize: $input.css(\"font-size\"),\n                fontStyle: $input.css(\"font-style\"),\n                fontVariant: $input.css(\"font-variant\"),\n                fontWeight: $input.css(\"font-weight\"),\n                wordSpacing: $input.css(\"word-spacing\"),\n                letterSpacing: $input.css(\"letter-spacing\"),\n                textIndent: $input.css(\"text-indent\"),\n                textRendering: $input.css(\"text-rendering\"),\n                textTransform: $input.css(\"text-transform\")\n            }).insertAfter($input);\n        }\n        function areQueriesEquivalent(a, b) {\n            return Input.normalizeQuery(a) === Input.normalizeQuery(b);\n        }\n        function withModifier($e) {\n            return $e.altKey || $e.ctrlKey || $e.metaKey || $e.shiftKey;\n        }\n    }();\n    var Dataset = function() {\n        \"use strict\";\n        var keys, nameGenerator;\n        keys = {\n            val: \"tt-selectable-display\",\n            obj: \"tt-selectable-object\"\n        };\n        nameGenerator = _.getIdGenerator();\n        function Dataset(o, www) {\n            o = o || {};\n            o.templates = o.templates || {};\n            o.templates.notFound = o.templates.notFound || o.templates.empty;\n            if (!o.source) {\n                $.error(\"missing source\");\n            }\n            if (!o.node) {\n                $.error(\"missing node\");\n            }\n            if (o.name && !isValidName(o.name)) {\n                $.error(\"invalid dataset name: \" + o.name);\n            }\n            www.mixin(this);\n            this.highlight = !!o.highlight;\n            this.name = o.name || nameGenerator();\n            this.limit = o.limit || 5;\n            this.displayFn = getDisplayFn(o.display || o.displayKey);\n            this.templates = getTemplates(o.templates, this.displayFn);\n            this.source = o.source.__ttAdapter ? o.source.__ttAdapter() : o.source;\n            this.async = _.isUndefined(o.async) ? this.source.length > 2 : !!o.async;\n            this._resetLastSuggestion();\n            this.$el = $(o.node).addClass(this.classes.dataset).addClass(this.classes.dataset + \"-\" + this.name);\n        }\n        Dataset.extractData = function extractData(el) {\n            var $el = $(el);\n            if ($el.data(keys.obj)) {\n                return {\n                    val: $el.data(keys.val) || \"\",\n                    obj: $el.data(keys.obj) || null\n                };\n            }\n            return null;\n        };\n        _.mixin(Dataset.prototype, EventEmitter, {\n            _overwrite: function overwrite(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (this.async && this.templates.pending) {\n                    this._renderPending(query);\n                } else if (!this.async && this.templates.notFound) {\n                    this._renderNotFound(query);\n                } else {\n                    this._empty();\n                }\n                this.trigger(\"rendered\", this.name, suggestions, false);\n            },\n            _append: function append(query, suggestions) {\n                suggestions = suggestions || [];\n                if (suggestions.length && this.$lastSuggestion.length) {\n                    this._appendSuggestions(query, suggestions);\n                } else if (suggestions.length) {\n                    this._renderSuggestions(query, suggestions);\n                } else if (!this.$lastSuggestion.length && this.templates.notFound) {\n                    this._renderNotFound(query);\n                }\n                this.trigger(\"rendered\", this.name, suggestions, true);\n            },\n            _renderSuggestions: function renderSuggestions(query, suggestions) {\n                var $fragment;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                this.$lastSuggestion = $fragment.children().last();\n                this.$el.html($fragment).prepend(this._getHeader(query, suggestions)).append(this._getFooter(query, suggestions));\n            },\n            _appendSuggestions: function appendSuggestions(query, suggestions) {\n                var $fragment, $lastSuggestion;\n                $fragment = this._getSuggestionsFragment(query, suggestions);\n                $lastSuggestion = $fragment.children().last();\n                this.$lastSuggestion.after($fragment);\n                this.$lastSuggestion = $lastSuggestion;\n            },\n            _renderPending: function renderPending(query) {\n                var template = this.templates.pending;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _renderNotFound: function renderNotFound(query) {\n                var template = this.templates.notFound;\n                this._resetLastSuggestion();\n                template && this.$el.html(template({\n                    query: query,\n                    dataset: this.name\n                }));\n            },\n            _empty: function empty() {\n                this.$el.empty();\n                this._resetLastSuggestion();\n            },\n            _getSuggestionsFragment: function getSuggestionsFragment(query, suggestions) {\n                var that = this, fragment;\n                fragment = document.createDocumentFragment();\n                _.each(suggestions, function getSuggestionNode(suggestion) {\n                    var $el, context;\n                    context = that._injectQuery(query, suggestion);\n                    $el = $(that.templates.suggestion(context)).data(keys.obj, suggestion).data(keys.val, that.displayFn(suggestion)).addClass(that.classes.suggestion + \" \" + that.classes.selectable);\n                    fragment.appendChild($el[0]);\n                });\n                this.highlight && highlight({\n                    className: this.classes.highlight,\n                    node: fragment,\n                    pattern: query\n                });\n                return $(fragment);\n            },\n            _getFooter: function getFooter(query, suggestions) {\n                return this.templates.footer ? this.templates.footer({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _getHeader: function getHeader(query, suggestions) {\n                return this.templates.header ? this.templates.header({\n                    query: query,\n                    suggestions: suggestions,\n                    dataset: this.name\n                }) : null;\n            },\n            _resetLastSuggestion: function resetLastSuggestion() {\n                this.$lastSuggestion = $();\n            },\n            _injectQuery: function injectQuery(query, obj) {\n                return _.isObject(obj) ? _.mixin({\n                    _query: query\n                }, obj) : obj;\n            },\n            update: function update(query) {\n                var that = this, canceled = false, syncCalled = false, rendered = 0;\n                this.cancel();\n                this.cancel = function cancel() {\n                    canceled = true;\n                    that.cancel = $.noop;\n                    that.async && that.trigger(\"asyncCanceled\", query);\n                };\n                this.source(query, sync, async);\n                !syncCalled && sync([]);\n                function sync(suggestions) {\n                    if (syncCalled) {\n                        return;\n                    }\n                    syncCalled = true;\n                    suggestions = (suggestions || []).slice(0, that.limit);\n                    rendered = suggestions.length;\n                    that._overwrite(query, suggestions);\n                    if (rendered < that.limit && that.async) {\n                        that.trigger(\"asyncRequested\", query);\n                    }\n                }\n                function async(suggestions) {\n                    suggestions = suggestions || [];\n                    if (!canceled && rendered < that.limit) {\n                        that.cancel = $.noop;\n                        rendered += suggestions.length;\n                        that._append(query, suggestions.slice(0, that.limit - rendered));\n                        that.async && that.trigger(\"asyncReceived\", query);\n                    }\n                }\n            },\n            cancel: $.noop,\n            clear: function clear() {\n                this._empty();\n                this.cancel();\n                this.trigger(\"cleared\");\n            },\n            isEmpty: function isEmpty() {\n                return this.$el.is(\":empty\");\n            },\n            destroy: function destroy() {\n                this.$el = $(\"<div>\");\n            }\n        });\n        return Dataset;\n        function getDisplayFn(display) {\n            display = display || _.stringify;\n            return _.isFunction(display) ? display : displayFn;\n            function displayFn(obj) {\n                return obj[display];\n            }\n        }\n        function getTemplates(templates, displayFn) {\n            return {\n                notFound: templates.notFound && _.templatify(templates.notFound),\n                pending: templates.pending && _.templatify(templates.pending),\n                header: templates.header && _.templatify(templates.header),\n                footer: templates.footer && _.templatify(templates.footer),\n                suggestion: templates.suggestion || suggestionTemplate\n            };\n            function suggestionTemplate(context) {\n                return $(\"<div>\").text(displayFn(context));\n            }\n        }\n        function isValidName(str) {\n            return /^[_a-zA-Z0-9-]+$/.test(str);\n        }\n    }();\n    var Menu = function() {\n        \"use strict\";\n        function Menu(o, www) {\n            var that = this;\n            o = o || {};\n            if (!o.node) {\n                $.error(\"node is required\");\n            }\n            www.mixin(this);\n            this.$node = $(o.node);\n            this.query = null;\n            this.datasets = _.map(o.datasets, initializeDataset);\n            function initializeDataset(oDataset) {\n                var node = that.$node.find(oDataset.node).first();\n                oDataset.node = node.length ? node : $(\"<div>\").appendTo(that.$node);\n                return new Dataset(oDataset, www);\n            }\n        }\n        _.mixin(Menu.prototype, EventEmitter, {\n            _onSelectableClick: function onSelectableClick($e) {\n                this.trigger(\"selectableClicked\", $($e.currentTarget));\n            },\n            _onRendered: function onRendered(type, dataset, suggestions, async) {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetRendered\", dataset, suggestions, async);\n            },\n            _onCleared: function onCleared() {\n                this.$node.toggleClass(this.classes.empty, this._allDatasetsEmpty());\n                this.trigger(\"datasetCleared\");\n            },\n            _propagate: function propagate() {\n                this.trigger.apply(this, arguments);\n            },\n            _allDatasetsEmpty: function allDatasetsEmpty() {\n                return _.every(this.datasets, isDatasetEmpty);\n                function isDatasetEmpty(dataset) {\n                    return dataset.isEmpty();\n                }\n            },\n            _getSelectables: function getSelectables() {\n                return this.$node.find(this.selectors.selectable);\n            },\n            _removeCursor: function _removeCursor() {\n                var $selectable = this.getActiveSelectable();\n                $selectable && $selectable.removeClass(this.classes.cursor);\n            },\n            _ensureVisible: function ensureVisible($el) {\n                var elTop, elBottom, nodeScrollTop, nodeHeight;\n                elTop = $el.position().top;\n                elBottom = elTop + $el.outerHeight(true);\n                nodeScrollTop = this.$node.scrollTop();\n                nodeHeight = this.$node.height() + parseInt(this.$node.css(\"paddingTop\"), 10) + parseInt(this.$node.css(\"paddingBottom\"), 10);\n                if (elTop < 0) {\n                    this.$node.scrollTop(nodeScrollTop + elTop);\n                } else if (nodeHeight < elBottom) {\n                    this.$node.scrollTop(nodeScrollTop + (elBottom - nodeHeight));\n                }\n            },\n            bind: function() {\n                var that = this, onSelectableClick;\n                onSelectableClick = _.bind(this._onSelectableClick, this);\n                this.$node.on(\"click.tt\", this.selectors.selectable, onSelectableClick);\n                _.each(this.datasets, function(dataset) {\n                    dataset.onSync(\"asyncRequested\", that._propagate, that).onSync(\"asyncCanceled\", that._propagate, that).onSync(\"asyncReceived\", that._propagate, that).onSync(\"rendered\", that._onRendered, that).onSync(\"cleared\", that._onCleared, that);\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                return this.$node.hasClass(this.classes.open);\n            },\n            open: function open() {\n                this.$node.addClass(this.classes.open);\n            },\n            close: function close() {\n                this.$node.removeClass(this.classes.open);\n                this._removeCursor();\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.attr(\"dir\", dir);\n            },\n            selectableRelativeToCursor: function selectableRelativeToCursor(delta) {\n                var $selectables, $oldCursor, oldIndex, newIndex;\n                $oldCursor = this.getActiveSelectable();\n                $selectables = this._getSelectables();\n                oldIndex = $oldCursor ? $selectables.index($oldCursor) : -1;\n                newIndex = oldIndex + delta;\n                newIndex = (newIndex + 1) % ($selectables.length + 1) - 1;\n                newIndex = newIndex < -1 ? $selectables.length - 1 : newIndex;\n                return newIndex === -1 ? null : $selectables.eq(newIndex);\n            },\n            setCursor: function setCursor($selectable) {\n                this._removeCursor();\n                if ($selectable = $selectable && $selectable.first()) {\n                    $selectable.addClass(this.classes.cursor);\n                    this._ensureVisible($selectable);\n                }\n            },\n            getSelectableData: function getSelectableData($el) {\n                return $el && $el.length ? Dataset.extractData($el) : null;\n            },\n            getActiveSelectable: function getActiveSelectable() {\n                var $selectable = this._getSelectables().filter(this.selectors.cursor).first();\n                return $selectable.length ? $selectable : null;\n            },\n            getTopSelectable: function getTopSelectable() {\n                var $selectable = this._getSelectables().first();\n                return $selectable.length ? $selectable : null;\n            },\n            update: function update(query) {\n                var isValidUpdate = query !== this.query;\n                if (isValidUpdate) {\n                    this.query = query;\n                    _.each(this.datasets, updateDataset);\n                }\n                return isValidUpdate;\n                function updateDataset(dataset) {\n                    dataset.update(query);\n                }\n            },\n            empty: function empty() {\n                _.each(this.datasets, clearDataset);\n                this.query = null;\n                this.$node.addClass(this.classes.empty);\n                function clearDataset(dataset) {\n                    dataset.clear();\n                }\n            },\n            destroy: function destroy() {\n                this.$node.off(\".tt\");\n                this.$node = $(\"<div>\");\n                _.each(this.datasets, destroyDataset);\n                function destroyDataset(dataset) {\n                    dataset.destroy();\n                }\n            }\n        });\n        return Menu;\n    }();\n    var DefaultMenu = function() {\n        \"use strict\";\n        var s = Menu.prototype;\n        function DefaultMenu() {\n            Menu.apply(this, [].slice.call(arguments, 0));\n        }\n        _.mixin(DefaultMenu.prototype, Menu.prototype, {\n            open: function open() {\n                !this._allDatasetsEmpty() && this._show();\n                return s.open.apply(this, [].slice.call(arguments, 0));\n            },\n            close: function close() {\n                this._hide();\n                return s.close.apply(this, [].slice.call(arguments, 0));\n            },\n            _onRendered: function onRendered() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onRendered.apply(this, [].slice.call(arguments, 0));\n            },\n            _onCleared: function onCleared() {\n                if (this._allDatasetsEmpty()) {\n                    this._hide();\n                } else {\n                    this.isOpen() && this._show();\n                }\n                return s._onCleared.apply(this, [].slice.call(arguments, 0));\n            },\n            setLanguageDirection: function setLanguageDirection(dir) {\n                this.$node.css(dir === \"ltr\" ? this.css.ltr : this.css.rtl);\n                return s.setLanguageDirection.apply(this, [].slice.call(arguments, 0));\n            },\n            _hide: function hide() {\n                this.$node.hide();\n            },\n            _show: function show() {\n                this.$node.css(\"display\", \"block\");\n            }\n        });\n        return DefaultMenu;\n    }();\n    var Typeahead = function() {\n        \"use strict\";\n        function Typeahead(o, www) {\n            var onFocused, onBlurred, onEnterKeyed, onTabKeyed, onEscKeyed, onUpKeyed, onDownKeyed, onLeftKeyed, onRightKeyed, onQueryChanged, onWhitespaceChanged;\n            o = o || {};\n            if (!o.input) {\n                $.error(\"missing input\");\n            }\n            if (!o.menu) {\n                $.error(\"missing menu\");\n            }\n            if (!o.eventBus) {\n                $.error(\"missing event bus\");\n            }\n            www.mixin(this);\n            this.eventBus = o.eventBus;\n            this.minLength = _.isNumber(o.minLength) ? o.minLength : 1;\n            this.input = o.input;\n            this.menu = o.menu;\n            this.enabled = true;\n            this.active = false;\n            this.input.hasFocus() && this.activate();\n            this.dir = this.input.getLangDir();\n            this._hacks();\n            this.menu.bind().onSync(\"selectableClicked\", this._onSelectableClicked, this).onSync(\"asyncRequested\", this._onAsyncRequested, this).onSync(\"asyncCanceled\", this._onAsyncCanceled, this).onSync(\"asyncReceived\", this._onAsyncReceived, this).onSync(\"datasetRendered\", this._onDatasetRendered, this).onSync(\"datasetCleared\", this._onDatasetCleared, this);\n            onFocused = c(this, \"activate\", \"open\", \"_onFocused\");\n            onBlurred = c(this, \"deactivate\", \"_onBlurred\");\n            onEnterKeyed = c(this, \"isActive\", \"isOpen\", \"_onEnterKeyed\");\n            onTabKeyed = c(this, \"isActive\", \"isOpen\", \"_onTabKeyed\");\n            onEscKeyed = c(this, \"isActive\", \"_onEscKeyed\");\n            onUpKeyed = c(this, \"isActive\", \"open\", \"_onUpKeyed\");\n            onDownKeyed = c(this, \"isActive\", \"open\", \"_onDownKeyed\");\n            onLeftKeyed = c(this, \"isActive\", \"isOpen\", \"_onLeftKeyed\");\n            onRightKeyed = c(this, \"isActive\", \"isOpen\", \"_onRightKeyed\");\n            onQueryChanged = c(this, \"_openIfActive\", \"_onQueryChanged\");\n            onWhitespaceChanged = c(this, \"_openIfActive\", \"_onWhitespaceChanged\");\n            this.input.bind().onSync(\"focused\", onFocused, this).onSync(\"blurred\", onBlurred, this).onSync(\"enterKeyed\", onEnterKeyed, this).onSync(\"tabKeyed\", onTabKeyed, this).onSync(\"escKeyed\", onEscKeyed, this).onSync(\"upKeyed\", onUpKeyed, this).onSync(\"downKeyed\", onDownKeyed, this).onSync(\"leftKeyed\", onLeftKeyed, this).onSync(\"rightKeyed\", onRightKeyed, this).onSync(\"queryChanged\", onQueryChanged, this).onSync(\"whitespaceChanged\", onWhitespaceChanged, this).onSync(\"langDirChanged\", this._onLangDirChanged, this);\n        }\n        _.mixin(Typeahead.prototype, {\n            _hacks: function hacks() {\n                var $input, $menu;\n                $input = this.input.$input || $(\"<div>\");\n                $menu = this.menu.$node || $(\"<div>\");\n                $input.on(\"blur.tt\", function($e) {\n                    var active, isActive, hasActive;\n                    active = document.activeElement;\n                    isActive = $menu.is(active);\n                    hasActive = $menu.has(active).length > 0;\n                    if (_.isMsie() && (isActive || hasActive)) {\n                        $e.preventDefault();\n                        $e.stopImmediatePropagation();\n                        _.defer(function() {\n                            $input.focus();\n                        });\n                    }\n                });\n                $menu.on(\"mousedown.tt\", function($e) {\n                    $e.preventDefault();\n                });\n            },\n            _onSelectableClicked: function onSelectableClicked(type, $el) {\n                this.select($el);\n            },\n            _onDatasetCleared: function onDatasetCleared() {\n                this._updateHint();\n            },\n            _onDatasetRendered: function onDatasetRendered(type, dataset, suggestions, async) {\n                this._updateHint();\n                this.eventBus.trigger(\"render\", suggestions, async, dataset);\n            },\n            _onAsyncRequested: function onAsyncRequested(type, dataset, query) {\n                this.eventBus.trigger(\"asyncrequest\", query, dataset);\n            },\n            _onAsyncCanceled: function onAsyncCanceled(type, dataset, query) {\n                this.eventBus.trigger(\"asynccancel\", query, dataset);\n            },\n            _onAsyncReceived: function onAsyncReceived(type, dataset, query) {\n                this.eventBus.trigger(\"asyncreceive\", query, dataset);\n            },\n            _onFocused: function onFocused() {\n                this._minLengthMet() && this.menu.update(this.input.getQuery());\n            },\n            _onBlurred: function onBlurred() {\n                if (this.input.hasQueryChangedSinceLastFocus()) {\n                    this.eventBus.trigger(\"change\", this.input.getQuery());\n                }\n            },\n            _onEnterKeyed: function onEnterKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                }\n            },\n            _onTabKeyed: function onTabKeyed(type, $e) {\n                var $selectable;\n                if ($selectable = this.menu.getActiveSelectable()) {\n                    this.select($selectable) && $e.preventDefault();\n                } else if ($selectable = this.menu.getTopSelectable()) {\n                    this.autocomplete($selectable) && $e.preventDefault();\n                }\n            },\n            _onEscKeyed: function onEscKeyed() {\n                this.close();\n            },\n            _onUpKeyed: function onUpKeyed() {\n                this.moveCursor(-1);\n            },\n            _onDownKeyed: function onDownKeyed() {\n                this.moveCursor(+1);\n            },\n            _onLeftKeyed: function onLeftKeyed() {\n                if (this.dir === \"rtl\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onRightKeyed: function onRightKeyed() {\n                if (this.dir === \"ltr\" && this.input.isCursorAtEnd()) {\n                    this.autocomplete(this.menu.getTopSelectable());\n                }\n            },\n            _onQueryChanged: function onQueryChanged(e, query) {\n                this._minLengthMet(query) ? this.menu.update(query) : this.menu.empty();\n            },\n            _onWhitespaceChanged: function onWhitespaceChanged() {\n                this._updateHint();\n            },\n            _onLangDirChanged: function onLangDirChanged(e, dir) {\n                if (this.dir !== dir) {\n                    this.dir = dir;\n                    this.menu.setLanguageDirection(dir);\n                }\n            },\n            _openIfActive: function openIfActive() {\n                this.isActive() && this.open();\n            },\n            _minLengthMet: function minLengthMet(query) {\n                query = _.isString(query) ? query : this.input.getQuery() || \"\";\n                return query.length >= this.minLength;\n            },\n            _updateHint: function updateHint() {\n                var $selectable, data, val, query, escapedQuery, frontMatchRegEx, match;\n                $selectable = this.menu.getTopSelectable();\n                data = this.menu.getSelectableData($selectable);\n                val = this.input.getInputValue();\n                if (data && !_.isBlankString(val) && !this.input.hasOverflow()) {\n                    query = Input.normalizeQuery(val);\n                    escapedQuery = _.escapeRegExChars(query);\n                    frontMatchRegEx = new RegExp(\"^(?:\" + escapedQuery + \")(.+$)\", \"i\");\n                    match = frontMatchRegEx.exec(data.val);\n                    match && this.input.setHint(val + match[1]);\n                } else {\n                    this.input.clearHint();\n                }\n            },\n            isEnabled: function isEnabled() {\n                return this.enabled;\n            },\n            enable: function enable() {\n                this.enabled = true;\n            },\n            disable: function disable() {\n                this.enabled = false;\n            },\n            isActive: function isActive() {\n                return this.active;\n            },\n            activate: function activate() {\n                if (this.isActive()) {\n                    return true;\n                } else if (!this.isEnabled() || this.eventBus.before(\"active\")) {\n                    return false;\n                } else {\n                    this.active = true;\n                    this.eventBus.trigger(\"active\");\n                    return true;\n                }\n            },\n            deactivate: function deactivate() {\n                if (!this.isActive()) {\n                    return true;\n                } else if (this.eventBus.before(\"idle\")) {\n                    return false;\n                } else {\n                    this.active = false;\n                    this.close();\n                    this.eventBus.trigger(\"idle\");\n                    return true;\n                }\n            },\n            isOpen: function isOpen() {\n                return this.menu.isOpen();\n            },\n            open: function open() {\n                if (!this.isOpen() && !this.eventBus.before(\"open\")) {\n                    this.menu.open();\n                    this._updateHint();\n                    this.eventBus.trigger(\"open\");\n                }\n                return this.isOpen();\n            },\n            close: function close() {\n                if (this.isOpen() && !this.eventBus.before(\"close\")) {\n                    this.menu.close();\n                    this.input.clearHint();\n                    this.input.resetInputValue();\n                    this.eventBus.trigger(\"close\");\n                }\n                return !this.isOpen();\n            },\n            setVal: function setVal(val) {\n                this.input.setQuery(_.toStr(val));\n            },\n            getVal: function getVal() {\n                return this.input.getQuery();\n            },\n            select: function select($selectable) {\n                var data = this.menu.getSelectableData($selectable);\n                if (data && !this.eventBus.before(\"select\", data.obj)) {\n                    this.input.setQuery(data.val, true);\n                    this.eventBus.trigger(\"select\", data.obj);\n                    this.close();\n                    return true;\n                }\n                return false;\n            },\n            autocomplete: function autocomplete($selectable) {\n                var query, data, isValid;\n                query = this.input.getQuery();\n                data = this.menu.getSelectableData($selectable);\n                isValid = data && query !== data.val;\n                if (isValid && !this.eventBus.before(\"autocomplete\", data.obj)) {\n                    this.input.setQuery(data.val);\n                    this.eventBus.trigger(\"autocomplete\", data.obj);\n                    return true;\n                }\n                return false;\n            },\n            moveCursor: function moveCursor(delta) {\n                var query, $candidate, data, payload, cancelMove;\n                query = this.input.getQuery();\n                $candidate = this.menu.selectableRelativeToCursor(delta);\n                data = this.menu.getSelectableData($candidate);\n                payload = data ? data.obj : null;\n                cancelMove = this._minLengthMet() && this.menu.update(query);\n                if (!cancelMove && !this.eventBus.before(\"cursorchange\", payload)) {\n                    this.menu.setCursor($candidate);\n                    if (data) {\n                        this.input.setInputValue(data.val);\n                    } else {\n                        this.input.resetInputValue();\n                        this._updateHint();\n                    }\n                    this.eventBus.trigger(\"cursorchange\", payload);\n                    return true;\n                }\n                return false;\n            },\n            destroy: function destroy() {\n                this.input.destroy();\n                this.menu.destroy();\n            }\n        });\n        return Typeahead;\n        function c(ctx) {\n            var methods = [].slice.call(arguments, 1);\n            return function() {\n                var args = [].slice.call(arguments);\n                _.each(methods, function(method) {\n                    return ctx[method].apply(ctx, args);\n                });\n            };\n        }\n    }();\n    (function() {\n        \"use strict\";\n        var old, keys, methods;\n        old = $.fn.typeahead;\n        keys = {\n            www: \"tt-www\",\n            attrs: \"tt-attrs\",\n            typeahead: \"tt-typeahead\"\n        };\n        methods = {\n            initialize: function initialize(o, datasets) {\n                var www;\n                datasets = _.isArray(datasets) ? datasets : [].slice.call(arguments, 1);\n                o = o || {};\n                www = WWW(o.classNames);\n                return this.each(attach);\n                function attach() {\n                    var $input, $wrapper, $hint, $menu, defaultHint, defaultMenu, eventBus, input, menu, typeahead, MenuConstructor;\n                    _.each(datasets, function(d) {\n                        d.highlight = !!o.highlight;\n                    });\n                    $input = $(this);\n                    $wrapper = $(www.html.wrapper);\n                    $hint = $elOrNull(o.hint);\n                    $menu = $elOrNull(o.menu);\n                    defaultHint = o.hint !== false && !$hint;\n                    defaultMenu = o.menu !== false && !$menu;\n                    defaultHint && ($hint = buildHintFromInput($input, www));\n                    defaultMenu && ($menu = $(www.html.menu).css(www.css.menu));\n                    $hint && $hint.val(\"\");\n                    $input = prepInput($input, www);\n                    if (defaultHint || defaultMenu) {\n                        $wrapper.css(www.css.wrapper);\n                        $input.css(defaultHint ? www.css.input : www.css.inputWithNoHint);\n                        $input.wrap($wrapper).parent().prepend(defaultHint ? $hint : null).append(defaultMenu ? $menu : null);\n                    }\n                    MenuConstructor = defaultMenu ? DefaultMenu : Menu;\n                    eventBus = new EventBus({\n                        el: $input\n                    });\n                    input = new Input({\n                        hint: $hint,\n                        input: $input\n                    }, www);\n                    menu = new MenuConstructor({\n                        node: $menu,\n                        datasets: datasets\n                    }, www);\n                    typeahead = new Typeahead({\n                        input: input,\n                        menu: menu,\n                        eventBus: eventBus,\n                        minLength: o.minLength\n                    }, www);\n                    $input.data(keys.www, www);\n                    $input.data(keys.typeahead, typeahead);\n                }\n            },\n            isEnabled: function isEnabled() {\n                var enabled;\n                ttEach(this.first(), function(t) {\n                    enabled = t.isEnabled();\n                });\n                return enabled;\n            },\n            enable: function enable() {\n                ttEach(this, function(t) {\n                    t.enable();\n                });\n                return this;\n            },\n            disable: function disable() {\n                ttEach(this, function(t) {\n                    t.disable();\n                });\n                return this;\n            },\n            isActive: function isActive() {\n                var active;\n                ttEach(this.first(), function(t) {\n                    active = t.isActive();\n                });\n                return active;\n            },\n            activate: function activate() {\n                ttEach(this, function(t) {\n                    t.activate();\n                });\n                return this;\n            },\n            deactivate: function deactivate() {\n                ttEach(this, function(t) {\n                    t.deactivate();\n                });\n                return this;\n            },\n            isOpen: function isOpen() {\n                var open;\n                ttEach(this.first(), function(t) {\n                    open = t.isOpen();\n                });\n                return open;\n            },\n            open: function open() {\n                ttEach(this, function(t) {\n                    t.open();\n                });\n                return this;\n            },\n            close: function close() {\n                ttEach(this, function(t) {\n                    t.close();\n                });\n                return this;\n            },\n            select: function select(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.select($el);\n                });\n                return success;\n            },\n            autocomplete: function autocomplete(el) {\n                var success = false, $el = $(el);\n                ttEach(this.first(), function(t) {\n                    success = t.autocomplete($el);\n                });\n                return success;\n            },\n            moveCursor: function moveCursoe(delta) {\n                var success = false;\n                ttEach(this.first(), function(t) {\n                    success = t.moveCursor(delta);\n                });\n                return success;\n            },\n            val: function val(newVal) {\n                var query;\n                if (!arguments.length) {\n                    ttEach(this.first(), function(t) {\n                        query = t.getVal();\n                    });\n                    return query;\n                } else {\n                    ttEach(this, function(t) {\n                        t.setVal(newVal);\n                    });\n                    return this;\n                }\n            },\n            destroy: function destroy() {\n                ttEach(this, function(typeahead, $input) {\n                    revert($input);\n                    typeahead.destroy();\n                });\n                return this;\n            }\n        };\n        $.fn.typeahead = function(method) {\n            if (methods[method]) {\n                return methods[method].apply(this, [].slice.call(arguments, 1));\n            } else {\n                return methods.initialize.apply(this, arguments);\n            }\n        };\n        $.fn.typeahead.noConflict = function noConflict() {\n            $.fn.typeahead = old;\n            return this;\n        };\n        function ttEach($els, fn) {\n            $els.each(function() {\n                var $input = $(this), typeahead;\n                (typeahead = $input.data(keys.typeahead)) && fn(typeahead, $input);\n            });\n        }\n        function buildHintFromInput($input, www) {\n            return $input.clone().addClass(www.classes.hint).removeData().css(www.css.hint).css(getBackgroundStyles($input)).prop(\"readonly\", true).removeAttr(\"id name placeholder required\").attr({\n                autocomplete: \"off\",\n                spellcheck: \"false\",\n                tabindex: -1\n            });\n        }\n        function prepInput($input, www) {\n            $input.data(keys.attrs, {\n                dir: $input.attr(\"dir\"),\n                autocomplete: $input.attr(\"autocomplete\"),\n                spellcheck: $input.attr(\"spellcheck\"),\n                style: $input.attr(\"style\")\n            });\n            $input.addClass(www.classes.input).attr({\n                autocomplete: \"off\",\n                spellcheck: false\n            });\n            try {\n                !$input.attr(\"dir\") && $input.attr(\"dir\", \"auto\");\n            } catch (e) {}\n            return $input;\n        }\n        function getBackgroundStyles($el) {\n            return {\n                backgroundAttachment: $el.css(\"background-attachment\"),\n                backgroundClip: $el.css(\"background-clip\"),\n                backgroundColor: $el.css(\"background-color\"),\n                backgroundImage: $el.css(\"background-image\"),\n                backgroundOrigin: $el.css(\"background-origin\"),\n                backgroundPosition: $el.css(\"background-position\"),\n                backgroundRepeat: $el.css(\"background-repeat\"),\n                backgroundSize: $el.css(\"background-size\")\n            };\n        }\n        function revert($input) {\n            var www, $wrapper;\n            www = $input.data(keys.www);\n            $wrapper = $input.parent().filter(www.selectors.wrapper);\n            _.each($input.data(keys.attrs), function(val, key) {\n                _.isUndefined(val) ? $input.removeAttr(key) : $input.attr(key, val);\n            });\n            $input.removeData(keys.typeahead).removeData(keys.www).removeData(keys.attr).removeClass(www.classes.input);\n            if ($wrapper.length) {\n                $input.detach().insertAfter($wrapper);\n                $wrapper.remove();\n            }\n        }\n        function $elOrNull(obj) {\n            var isValid, $el;\n            isValid = _.isJQuery(obj) || _.isElement(obj);\n            $el = isValid ? $(obj).first() : [];\n            return $el.length ? $el : null;\n        }\n    })();\n});"]},"metadata":{},"sourceType":"module"}