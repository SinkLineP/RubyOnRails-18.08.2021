{"ast":null,"code":"$.ajaxSetup({\n  headers: {\n    'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n  }\n});\n/* cart */\n\n$('body').on('click', 'add-to-cart-link', function (e) {\n  e.preventDefault();\n  var product_id = $(this).data('id'),\n      quantity = $('.quantity input').val() ? $('.quantity input').val() : 1,\n      mod = $('.available select')[\"var\"](),\n      access = $('#cart_access').val();\n\n  if (access == 99) {\n    showCartEmpty();\n    return false;\n  }\n\n  $.ajax({\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n    },\n    url: $(this).attr('href'),\n    data: {\n      product_id: product_id,\n      quantity: quantity,\n      mod: mod\n    },\n    type: 'POST',\n    success: function success(res) {\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error! Try later!');\n    }\n  });\n});\n$('#cart .modal-body').on('click', '.del-item', function () {\n  var id = $(this).data('id');\n  $.ajax({\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n    },\n    url: \"/cart/items/\" + id,\n    data: {\n      id: id\n    },\n    method: 'delete',\n    type: 'POST',\n    success: function success(res) {\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error!');\n    }\n  });\n});\n\nfunction showCart(cart) {\n  if ($.trim(cart) == '<td>Cart is Empty</td>') {\n    $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n  } else {\n    $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'inline-block');\n  }\n\n  $('#cart .modal-body');\n} // // Search\n// var products = new Bloodhound({\n//     datumTokenizer: Bloodhound.tokenizer.whitespace,\n//     queryTokenizer: Bloodhound.tokenizer.whitespace,\n//     remote: {\n//         wildcart:'%QUERY',\n//         url: '/search?query=%QUERY'\n//     }\n// });\n// products.initialize();\n// $('#typeahead').typeahead({\n//     // hint: false,\n//     highlight: true\n// },{\n//     name: 'products',\n//     display: 'title',\n//     limit: 10,\n//     source: products\n// });\n// $('#typeahead').bind('typeahead:select', function(ev, suggestion) {\n//     //console.log(suggestion);\n//     window.location = '/product/' + encodeURIComponent(suggestion.id);\n// });\n// // ------------------","map":{"version":3,"sources":["/home/sinkline/Sasha san/Wacth_Rails/watch_rails/app/javascript/packs/my.js"],"names":["$","ajaxSetup","headers","attr","on","e","preventDefault","product_id","data","quantity","val","mod","access","showCartEmpty","ajax","beforeSend","xhr","setRequestHeader","url","type","success","res","showCart","error","alert","id","method","cart","trim","css"],"mappings":"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","sourcesContent":["$.ajaxSetup({\n    headers: {\n        'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n    }\n});\n\n/* cart */\n$('body').on('click', 'add-to-cart-link', function (e) {\n    e.preventDefault();\n    var product_id = $(this).data('id'),\n        quantity   = $('.quantity input').val() ? $('.quantity input').val() : 1,\n        mod        = $('.available select').var(),\n        access     = $('#cart_access').val();\n\n        if(access == 99){\n            showCartEmpty()\n            return false\n        }\n\n        $.ajax({\n            beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n                $('meta[name=\"csrf-token\"]').attr('content'))},\n            url: $(this).attr('href'),\n            data: {product_id: product_id, quantity: quantity, mod: mod},\n            type: 'POST',\n            success: function (res) {\n                showCart(res)\n            },\n            error: function () {\n                alert('Error! Try later!')\n            },\n        });\n});\n\n\n$('#cart .modal-body').on('click', '.del-item', function(){\n    var id = $(this).data('id');\n    $.ajax({\n        beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n            $('meta[name=\"csrf-token\"]').attr('content'))},\n        url: \"/cart/items/\"+id,\n        data: { id: id },\n        method: 'delete',\n        type: 'POST',\n\n        success: function (res) {\n            showCart(res)\n        },\n        error: function () {\n            alert('Error!')\n        },\n    })\n});\n\nfunction showCart(cart) {\n    if($.trim(cart) == '<td>Cart is Empty</td>'){\n        $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n    } else {\n        $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'inline-block');\n    }\n    $('#cart .modal-body')\n}\n// // Search\n// var products = new Bloodhound({\n//     datumTokenizer: Bloodhound.tokenizer.whitespace,\n//     queryTokenizer: Bloodhound.tokenizer.whitespace,\n//     remote: {\n//         wildcart:'%QUERY',\n//         url: '/search?query=%QUERY'\n//     }\n// });\n\n// products.initialize();\n\n// $('#typeahead').typeahead({\n//     // hint: false,\n//     highlight: true\n// },{\n//     name: 'products',\n//     display: 'title',\n//     limit: 10,\n//     source: products\n// });\n\n// $('#typeahead').bind('typeahead:select', function(ev, suggestion) {\n//     //console.log(suggestion);\n//     window.location = '/product/' + encodeURIComponent(suggestion.id);\n// });\n\n// // ------------------\n\n"]},"metadata":{},"sourceType":"module"}