{"ast":null,"code":"$.ajaxSetup({\n  headers: {\n    'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n  }\n});\ndocument.addEventListener(\"turbolinks:load\", function () {\n  $('body').on('click', '.add-to-cart-link', function (e) {\n    e.preventDefault();\n    var product_id = $(this).data('id'),\n        quantity = $('.quantity input').val() ? $('.quantity input').val() : 1,\n        mod = $('.vailable select').val(),\n        access = $('#cart_access').val();\n\n    if (access == 99) {\n      showCartEmpty();\n      return false;\n    }\n\n    ;\n    $.ajax({\n      beforeSend: function beforeSend(xhr) {\n        xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n      },\n      url: \"/cart/cart_items\",\n      data: {\n        product_id: product_id,\n        quantity: quantity,\n        mod: mod\n      },\n      type: 'POST',\n      success: function success(res) {\n        showCart(res);\n      },\n      error: function error() {\n        alert('Error! Try later!');\n      }\n    });\n  });\n  $('#cart .modal-body').on('click', '.del-item', function () {\n    var id = $(this).data('id');\n    $.ajax({\n      beforeSend: function beforeSend(xhr) {\n        xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n      },\n      url: \"/cart/cart_items/\" + id,\n      data: {\n        id: id\n      },\n      method: 'delete',\n      type: 'POST',\n      success: function success(res) {\n        showCart(res);\n      },\n      error: function error() {\n        alert('Error!');\n      }\n    });\n  });\n\n  function showCart(cart) {\n    if ($.trim(cart) === '<td>Cart is Empty</td>') {\n      $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'none');\n    } else {\n      $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'inline-block');\n    }\n\n    $('#cart .modal-body').html(cart);\n    $('#cart').modal();\n\n    if ($('.cart-sum').text()) {\n      $('.simpleCart_total').html($('#cart .cart-sum').text());\n    } else {\n      $('.simpleCart_total').text('Empty Cart');\n    }\n  }\n\n  window.getCart = function () {\n    $.ajax({\n      url: '/cart',\n      type: 'GET',\n      success: function success(res) {\n        showCart(res);\n      },\n      error: function error() {\n        alert('Error! Try later!');\n      }\n    });\n  };\n\n  function showCartEmpty() {\n    var result = {\n      error: 'Please sign in! To view the cart.'\n    };\n    var modal = $('#cart').modal();\n    $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n    modal.find('.modal-body').html(result.error);\n  }\n\n  window.clearCart = function () {\n    $.ajax({\n      url: '/cart',\n      method: 'delete',\n      type: 'POST',\n      success: function success(res) {\n        localStorage.clear();\n        showCart(res);\n      },\n      error: function error() {\n        alert('Error!');\n      }\n    });\n  }; // // import $ from 'jquery';\n  // // var Bloodhound = require('typeahead.js/dist/bloodhound');\n  // // // import 'typeahead.js/dist/typeahead.bundle';\n  // // // import 'bootstrap-3-typeahead';\n  // // // //     // var products = new Bloodhound({\n  // // // //     //     datumTokenizer: Bloodhound.tokenizers.whitespace,\n  // // // //     //     queryTokenizer: Bloodhound.tokenizers.whitespace,\n  // // // //     //     remote: {\n  // // // //     //         wildcard: '%QUERY%',\n  // // // //     //         url: '/search?query=%QUERY%'        \n  // // // //     //     }\n  // // // //     // });\n  // var products= new Bloodhound({\n  // datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n  // queryTokenizer: Bloodhound.tokenizers.whitespace,\n  // remote: {\n  //     url: '/search?query/=%QUERY%',\n  //     wildcard: '%QUERY%',\n  //     cache: false\n  // },\n  // });\n  //     products.initialize();\n  //     $('#typeahead').on('typeahead',function() {\n  //         // hint: false\n  //         highlight: true\n  //     },{\n  //         name: 'products',\n  //         display: 'title',\n  //         limit: 10,\n  //         source: products\n  //     });\n  //     $('#typeahead').bind('typeahead:select', function(ev, suggestion) {\n  //         // console.log(suggestion);\n  //         window.location = '/product/' + encodeURIComponent(suggestion.id);    \n  //     });\n  // // // var Bloodhound = require('typeahead.js/dist/bloodhound');\n  // // // $(document).ready(function(){\n  // // //     // Sonstructs the suggestion engine\n  // // //     var products = new Bloodhound({\n  // // //         datumTokenizer: Bloodhound.tokenizers.obj.whitespace('query'),\n  // // //         queryTokenizer: Bloodhound.tokenizers.whitespace,\n  // // //         // The url points to a json file that contains an array of country names\n  // // //         prefetch: '/search'\n  // // //     });\n  // // //     products.initialize();\n  // // //     // Initializing the typeahead with remote dataset without highlighting\n  // // //     $('#typeahead').on('typeahead', {\n  // // //         name: 'products',\n  // // //         source: products,\n  // // //         limit: 10 /* Specify max number of suggestions to be displayed */\n  // // //     });\n  // // // });\n  // // $(\"#big-search-box\").bind(\"keyup\", function() {\n  // //     $(\"#big-search-box\").addClass(\"loading\"); // show the spinner\n  // //     var form = $(\"#live-search-form\"); // grab the form wrapping the search bar.\n  // //     var url = \"/search/\"; // live_search action.   \n  // //     var formData = form.serialize(); // grab the data in the form   \n  // //     $.get(url, formData, function(html) { // perform an AJAX get\n  // //       $(\"#big-search-box\").removeClass(\"loading\"); // hide the spinner\n  // //       $(\"#live-search-results\").html(html); // replace the \"results\" div with the results\n  // //     });\n\n});","map":{"version":3,"sources":["/home/sinkline/Sasha san/Wacth_Rails/watch_rails/app/javascript/packs/my.js"],"names":["$","ajaxSetup","headers","attr","document","addEventListener","on","e","preventDefault","product_id","data","quantity","val","mod","access","showCartEmpty","ajax","beforeSend","xhr","setRequestHeader","url","type","success","res","showCart","error","alert","id","method","cart","trim","css","html","modal","text","window","getCart","result","find","clearCart","localStorage","clear"],"mappings":"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","sourcesContent":["\n    \n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\ndocument.addEventListener(\"turbolinks:load\", function() {\n    $('body').on('click', '.add-to-cart-link', function(e) {\n        e.preventDefault();\n        var product_id = $(this).data('id'),\n            quantity   = $('.quantity input').val() ? $('.quantity input').val() : 1,\n            mod        = $('.vailable select').val(),\n            access     = $('#cart_access').val();\n        \n            if(access == 99){\n                showCartEmpty()\n                return false\n            };\n            \n            $.ajax({\n                beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n                    $('meta[name=\"csrf-token\"]').attr('content'))},\n                url: \"/cart/cart_items\",\n                data: {product_id: product_id, quantity: quantity, mod: mod},\n                type: 'POST',\n                success: function (res) {\n                    showCart(res)\n                },\n                error: function () {\n                    alert('Error! Try later!');\n                },\n\n            });\n    });\n\n    $('#cart .modal-body').on('click', '.del-item', function(){\n        var id = $(this).data('id');\n        $.ajax({\n            beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n                $('meta[name=\"csrf-token\"]').attr('content'))},\n            url: \"/cart/cart_items/\" + id,\n            data: {id: id},\n            method: 'delete',\n            type: 'POST',\n            success: function (res) {\n                showCart(res)\n            },\n            error: function () {\n                alert('Error!');\n            },\n\n        });\n    });\n\n    function showCart(cart) {\n        if($.trim(cart) === '<td>Cart is Empty</td>'){\n            $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'none');    \n        }else{\n            $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'inline-block');\n        }\n        $('#cart .modal-body').html(cart); \n        $('#cart').modal();\n        if($('.cart-sum').text()){\n            $('.simpleCart_total').html($('#cart .cart-sum').text());\n        }else{\n            $('.simpleCart_total').text('Empty Cart');\n        }\n    }\n\n    window.getCart = function () {\n        $.ajax({\n            url: '/cart',\n            type: 'GET',\n            success: function(res) {\n                showCart(res)\n            },\n            error: function () {\n                alert('Error! Try later!');\n            }, \n        });\n    }\n\n    function showCartEmpty() {\n        var result = {error: 'Please sign in! To view the cart.'}\n        var modal  = $('#cart').modal();\n        $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n        modal.find('.modal-body').html(result.error)\n    }\n\n     window.clearCart = function () {\n        $.ajax({\n            url: '/cart',\n            method: 'delete',\n            type: 'POST',\n            \n            success: function (res) {\n                localStorage.clear()\n                showCart(res)\n            },\n            error: function () {\n                alert('Error!');\n            }, \n        });\n    }\n\n   \n\n    // // import $ from 'jquery';\n    // // var Bloodhound = require('typeahead.js/dist/bloodhound');\n    // // // import 'typeahead.js/dist/typeahead.bundle';\n    // // // import 'bootstrap-3-typeahead';\n    // // // //     // var products = new Bloodhound({\n    // // // //     //     datumTokenizer: Bloodhound.tokenizers.whitespace,\n    // // // //     //     queryTokenizer: Bloodhound.tokenizers.whitespace,\n    // // // //     //     remote: {\n    // // // //     //         wildcard: '%QUERY%',\n    // // // //     //         url: '/search?query=%QUERY%'        \n    // // // //     //     }\n    // // // //     // });\n    // var products= new Bloodhound({\n    // datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),\n    // queryTokenizer: Bloodhound.tokenizers.whitespace,\n    // remote: {\n    //     url: '/search?query/=%QUERY%',\n    //     wildcard: '%QUERY%',\n    //     cache: false\n    // },\n    // });\n\n\n        \n\n    //     products.initialize();\n\n\n    //     $('#typeahead').on('typeahead',function() {\n    //         // hint: false\n    //         highlight: true\n    //     },{\n    //         name: 'products',\n    //         display: 'title',\n    //         limit: 10,\n    //         source: products\n    //     });\n\n\n\n\n    //     $('#typeahead').bind('typeahead:select', function(ev, suggestion) {\n    //         // console.log(suggestion);\n    //         window.location = '/product/' + encodeURIComponent(suggestion.id);    \n    //     });\n    // // // var Bloodhound = require('typeahead.js/dist/bloodhound');\n    // // // $(document).ready(function(){\n    // // //     // Sonstructs the suggestion engine\n    // // //     var products = new Bloodhound({\n    // // //         datumTokenizer: Bloodhound.tokenizers.obj.whitespace('query'),\n    // // //         queryTokenizer: Bloodhound.tokenizers.whitespace,\n    // // //         // The url points to a json file that contains an array of country names\n    // // //         prefetch: '/search'\n    // // //     });\n        \n    // // //     products.initialize();\n    // // //     // Initializing the typeahead with remote dataset without highlighting\n    // // //     $('#typeahead').on('typeahead', {\n    // // //         name: 'products',\n    // // //         source: products,\n    // // //         limit: 10 /* Specify max number of suggestions to be displayed */\n    // // //     });\n    // // // });\n\n    // // $(\"#big-search-box\").bind(\"keyup\", function() {\n\n    // //     $(\"#big-search-box\").addClass(\"loading\"); // show the spinner\n    // //     var form = $(\"#live-search-form\"); // grab the form wrapping the search bar.\n    \n    // //     var url = \"/search/\"; // live_search action.   \n    // //     var formData = form.serialize(); // grab the data in the form   \n    // //     $.get(url, formData, function(html) { // perform an AJAX get\n    \n    // //       $(\"#big-search-box\").removeClass(\"loading\"); // hide the spinner\n    \n    // //       $(\"#live-search-results\").html(html); // replace the \"results\" div with the results\n    \n    // //     });\n    \n       }); "]},"metadata":{},"sourceType":"module"}