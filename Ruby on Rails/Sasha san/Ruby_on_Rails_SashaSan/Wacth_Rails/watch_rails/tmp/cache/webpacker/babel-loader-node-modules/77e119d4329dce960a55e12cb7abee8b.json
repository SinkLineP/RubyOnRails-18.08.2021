{"ast":null,"code":"$.ajaxSetup({\n  headers: {\n    'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n  }\n}); //document.addEventListener(\"turbolinks:load\", function() {\n\n$('body').on('click', '.add-to-cart-link', function (e) {\n  e.preventDefault();\n  var product_id = $(this).data('id'),\n      quantity = $('.quantity input').val() ? $('.quantity input').val() : 1,\n      mod = $('.vailable select').val(),\n      access = $('#cart_access').val();\n\n  if (access == 99) {\n    showCartEmpty();\n    return true;\n  }\n\n  ;\n  $.ajaxSetup({\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n    },\n    url: \"/cart/cart_items\",\n    data: {\n      product_id: product_id,\n      quantity: quantity,\n      mod: mod\n    },\n    type: 'POST',\n    success: function success(res) {\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error! Try later!');\n    }\n  });\n}); // cart\n\n$('#cart .modal-body').on('click', '.del-item', function () {\n  var id = $(this).data('id');\n  $.ajaxSetup({\n    beforeSend: function beforeSend(xhr) {\n      xhr.setRequestHeader('X-CSRF-Token', $('meta[name=\"csrf-token\"]').attr('content'));\n    },\n    url: \"/cart/cart_items/\" + id,\n    data: {\n      id: id\n    },\n    method: 'delete',\n    type: 'POST',\n    success: function success(res) {\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error!');\n    }\n  });\n});\n\nfunction showCart(cart) {\n  if ($.trim(cart) === '<td>Cart is Empty</td>') {\n    $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'none');\n  } else {\n    $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'inline-block');\n  }\n\n  $('#cart .modal-body').html(cart);\n  $('#cart').modal();\n\n  if ($('.cart-sum').text()) {\n    $('.simpleCart_total').html($('#cart .cart-sum').text());\n  } else {\n    $('.simpleCart_total').text('Empty Cart');\n  }\n}\n\nwindow.getCart = function () {\n  $.ajaxS({\n    url: '/cart',\n    type: 'GET',\n    success: function success(res) {\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error! Try later!');\n    }\n  });\n};\n\nfunction showCartEmpty() {\n  var result = {\n    error: 'Please sign in! To view the cart.'\n  };\n  var modal = $('#cart').modal();\n  $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n  modal.find('.modal-body').html(result.error);\n}\n\nwindow.clearCart = function () {\n  $.ajax({\n    url: '/cart',\n    method: 'delete',\n    type: 'POST',\n    success: function success(res) {\n      localStorage.clear();\n      showCart(res);\n    },\n    error: function error() {\n      alert('Error!');\n    }\n  });\n};","map":{"version":3,"sources":["/home/sinkline/Sasha san/Wacth_Rails/watch_rails/app/javascript/packs/my.js"],"names":["$","ajaxSetup","headers","attr","on","e","preventDefault","product_id","data","quantity","val","mod","access","showCartEmpty","beforeSend","xhr","setRequestHeader","url","type","success","res","showCart","error","alert","id","method","cart","trim","css","html","modal","text","window","getCart","ajaxS","result","find","clearCart","ajax","localStorage","clear"],"mappings":"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","sourcesContent":["\n    \n    $.ajaxSetup({\n        headers: {\n            'X-CSRF-Token': $('meta[name=\"csrf-token\"]').attr('content')\n        }\n    });\n//document.addEventListener(\"turbolinks:load\", function() {\n    $('body').on('click', '.add-to-cart-link', function(e) {\n        e.preventDefault();\n        var product_id = $(this).data('id'),\n            quantity   = $('.quantity input').val() ? $('.quantity input').val() : 1,\n            mod        = $('.vailable select').val(),\n            access     = $('#cart_access').val();\n        \n            if(access == 99){\n                showCartEmpty()\n                return true\n            };\n            \n            $.ajaxSetup({\n                beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n                    $('meta[name=\"csrf-token\"]').attr('content'))},\n                url: \"/cart/cart_items\",\n                data: {product_id: product_id, quantity: quantity, mod: mod},\n                type: 'POST',\n                success: function (res) {\n                    showCart(res)\n                },\n                error: function () {\n                    alert('Error! Try later!');\n                },\n\n            });\n    });\n\n    // cart\n\n    $('#cart .modal-body').on('click', '.del-item', function(){\n        var id = $(this).data('id');\n        $.ajaxSetup({\n            beforeSend: function(xhr) {xhr.setRequestHeader('X-CSRF-Token',\n                $('meta[name=\"csrf-token\"]').attr('content'))},\n            url: \"/cart/cart_items/\" + id,\n            data: {id: id},\n            method: 'delete',\n            type: 'POST',\n            success: function (res) {\n                showCart(res)\n            },\n            error: function () {\n                alert('Error!');\n            },\n\n        });\n    });\n\n    function showCart(cart) {\n        if($.trim(cart) === '<td>Cart is Empty</td>'){\n            $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'none');    \n        }else{\n            $('#cart .modal-footer a , #cart .modal-footer .btn-danger').css('display', 'inline-block');\n        }\n        $('#cart .modal-body').html(cart); \n        $('#cart').modal();\n        if($('.cart-sum').text()){\n            $('.simpleCart_total').html($('#cart .cart-sum').text());\n        }else{\n            $('.simpleCart_total').text('Empty Cart');\n        }\n    }\n\n    window.getCart = function () {\n        $.ajaxS({\n            url: '/cart',\n            type: 'GET',\n            success: function(res) {\n                showCart(res)\n            },\n            error: function () {\n                alert('Error! Try later!');\n            }, \n        });\n    }\n\n    function showCartEmpty() {\n        var result = {error: 'Please sign in! To view the cart.'}\n        var modal  = $('#cart').modal();\n        $('#cart .modal-footer a, #cart .modal-footer .btn-danger').css('display', 'none');\n        modal.find('.modal-body').html(result.error)\n    }\n\n     window.clearCart = function () {\n        $.ajax({\n            url: '/cart',\n            method: 'delete',\n            type: 'POST',\n            \n            success: function (res) {\n                localStorage.clear()\n                showCart(res)\n            },\n            error: function () {\n                alert('Error!');\n            }, \n        });\n    }\n\n   \n"]},"metadata":{},"sourceType":"module"}